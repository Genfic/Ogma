{
  "version": 3,
  "sources": ["..\\..\\FrontendCode\\typescript\\src-workers\\cache-service-worker.ts"],
  "sourcesContent": [
    "declare let self: ServiceWorkerGlobalScope;\r\n\r\nconst MANIFEST_URL = \"manifest.txt\";\r\n\r\nconst loadManifest = async () => {\r\n\tconst response = await fetch(MANIFEST_URL);\r\n\tconst text = await response.text();\r\n\r\n\tconst lines = text.split(\"\\n\");\r\n\r\n\tconst stamp = new Date(lines[0]).getTime();\r\n\r\n\treturn {\r\n\t\tstamp: `precache-${stamp}`,\r\n\t\tfiles: lines.slice(1).map((l) => {\r\n\t\t\tconst [url, hash] = l.split(\":\");\r\n\t\t\treturn `${url}?v=${hash ?? \"\"}`;\r\n\t\t}),\r\n\t};\r\n};\r\n\r\nconst precache = async () => {\r\n\tconst { stamp, files } = await loadManifest();\r\n\tconst cache = await caches.open(stamp);\r\n\r\n\tawait Promise.all(\r\n\t\tfiles.map(async (url) => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await fetch(url, { cache: \"reload\" });\r\n\t\t\t\tif (!res.ok) {\r\n\t\t\t\t\tconsole.warn(\"Failed to fetch for precache:\", url);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait cache.put(url, res);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error(\"Error precaching\", url, err);\r\n\t\t\t}\r\n\t\t}),\r\n\t);\r\n\r\n\tconsole.info(`Precached ${files.length} assets into cache ${stamp}`);\r\n};\r\n\r\nconst clearOldCaches = async () => {\r\n\tconst { stamp } = await loadManifest();\r\n\tconst keys = await caches.keys();\r\n\r\n\tawait Promise.all(keys.filter((key) => key !== stamp).map((key) => caches.delete(key)));\r\n\r\n\tawait self.clients.claim();\r\n\r\n\tconsole.info(\"Cleared old caches. Active cache:\", stamp);\r\n};\r\n\r\nself.addEventListener(\"install\", (e) => {\r\n\te.waitUntil(precache());\r\n});\r\n\r\nself.addEventListener(\"activate\", (e) => {\r\n\te.waitUntil(clearOldCaches());\r\n});\r\n\r\nexport {};\r\n"
  ],
  "mappings": "AAIA,IAAM,EAAe,SAAY,CAIhC,IAAM,GAFO,MADI,MAAM,MAHH,cAGqB,GACb,KAAK,GAEd,MAAM;AAAA,CAAI,EAI7B,MAAO,CACN,MAAO,YAHM,IAAI,KAAK,EAAM,EAAE,EAAE,QAAQ,IAIxC,MAAO,EAAM,MAAM,CAAC,EAAE,IAAI,CAAC,IAAM,CAChC,IAAO,EAAK,GAAQ,EAAE,MAAM,GAAG,EAC/B,MAAO,GAAG,OAAS,GAAQ,KAC3B,CACF,GAGK,EAAW,SAAY,CAC5B,IAAQ,QAAO,SAAU,MAAM,EAAa,EACtC,EAAQ,MAAM,OAAO,KAAK,CAAK,EAErC,MAAM,QAAQ,IACb,EAAM,IAAI,MAAO,IAAQ,CACxB,GAAI,CACH,IAAM,EAAM,MAAM,MAAM,EAAK,CAAE,MAAO,QAAS,CAAC,EAChD,GAAI,CAAC,EAAI,GACR,QAAQ,KAAK,gCAAiC,CAAG,EAGlD,MAAM,EAAM,IAAI,EAAK,CAAG,EACvB,MAAO,EAAK,CACb,QAAQ,MAAM,mBAAoB,EAAK,CAAG,GAE3C,CACF,EAEA,QAAQ,KAAK,aAAa,EAAM,4BAA4B,GAAO,GAG9D,EAAiB,SAAY,CAClC,IAAQ,SAAU,MAAM,EAAa,EAC/B,EAAO,MAAM,OAAO,KAAK,EAE/B,MAAM,QAAQ,IAAI,EAAK,OAAO,CAAC,IAAQ,IAAQ,CAAK,EAAE,IAAI,CAAC,IAAQ,OAAO,OAAO,CAAG,CAAC,CAAC,EAEtF,MAAM,KAAK,QAAQ,MAAM,EAEzB,QAAQ,KAAK,oCAAqC,CAAK,GAGxD,KAAK,iBAAiB,UAAW,CAAC,IAAM,CACvC,EAAE,UAAU,EAAS,CAAC,EACtB,EAED,KAAK,iBAAiB,WAAY,CAAC,IAAM,CACxC,EAAE,UAAU,EAAe,CAAC,EAC5B",
  "debugId": "ABAA88396EF26AC864756E2164756E21",
  "names": []
}