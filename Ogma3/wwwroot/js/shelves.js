async function i(e,t,n,s,m){let a=await fetch(e,{method:t,headers:{"Content-Type":"application/json",...s},body:n?JSON.stringify(n):null,...m}),c=a.headers.get("content-type"),o;if(c?.includes("application/json"))o=await a.json();else o=await a.text();return{ok:a.ok,status:a.status,statusText:a.statusText,headers:a.headers,data:o}}var r=async(e,t,n)=>await i(`/api/shelves/${e}`,"DELETE",void 0,t,n);var d=async(e,t,n,s)=>await i(`/api/shelves/${e}?page=${t}`,"GET",void 0,n,s);var p=async(e,t,n)=>await i("/api/shelves","POST",e,t,n);var u=async(e,t,n)=>await i("/api/shelves","PUT",e,t,n);new Vue({el:"#shelves",data:{form:{name:null,desc:null,pub:!1,quick:!1,track:!1,color:null,icon:null,id:null},showForm:!1,csrf:null,err:null,shelves:[],route:null,owner:null},methods:{createShelf:async function(e){if(e.preventDefault(),this.form.name){let t={name:this.form.name,description:this.form.desc,isPublic:this.form.pub,isQuickAdd:this.form.quick,trackUpdates:this.form.track,color:this.form.color,icon:Number(this.form.icon)},n={RequestVerificationToken:this.csrf};if(this.form.id===null){if((await p(t,n)).ok)await this.getShelves(),this.cancelEdit()}else if((await u({id:this.form.id,...t},n)).ok)await this.getShelves(),this.cancelEdit(),this.showForm=!1}},getShelves:async function(){let e=await d(this.owner,1);if(e.ok)this.shelves=e.data},deleteShelf:async function(e){if(confirm("Delete permanently?")){if((await r(e.id,{RequestVerificationToken:this.csrf})).ok)await this.getShelves()}},editShelf:function(e){this.form.name=e.name,this.form.desc=e.description,this.form.id=e.id,this.form.color=e.color,this.form.quick=e.isQuickAdd,this.form.pub=e.isPublic,this.form.track=e.trackUpdates,this.form.icon=e.iconId,this.showForm=!0},cancelEdit:function(){for(let e of Object.keys(this.form))this.form[e]=null;this.form.isQuickAdd=this.form.isPublic=!1,this.showForm=!1}},async mounted(){this.csrf=document.querySelector("input[name=__RequestVerificationToken]").value,this.owner=document.getElementById("owner").dataset.owner,await this.getShelves()}});

//# debugId=330D2749425A9B0564756E2164756E21
//# sourceMappingURL=shelves.js.map
