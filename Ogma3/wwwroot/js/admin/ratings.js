async function o(e,t,n,s,p){let a=await fetch(e,{method:t,headers:{"Content-Type":"application/json",...s},body:n?JSON.stringify(n):null,...p}),u=a.headers.get("content-type"),i;if(u?.includes("application/json"))i=await a.json();else i=await a.text();return{ok:a.ok,status:a.status,statusText:a.statusText,headers:a.headers,data:i}}var r=async(e,t,n)=>await o(`/api/ratings/${e}`,"DELETE",void 0,t,n);var d=async(e,t)=>await o("/api/ratings","GET",void 0,e,t);new Vue({el:"#app",data:{form:{name:null,desc:null,icon:null,blacklist:null,id:null,order:null},err:[],ratings:[],route:null,xcsrf:null},methods:{iconChanged:function(e){this.form.icon=e.target.files[0]},createRating:async function(e){if(e.preventDefault(),this.form.name){let t=new FormData;if(t.append("name",this.form.name),t.append("description",this.form.desc),t.append("blacklistedByDefault",(this.form.blacklist??!1).toString()),t.append("order",this.form.order),this.form.icon)t.append("icon",this.form.icon,this.form.icon.name);let n={RequestVerificationToken:this.xcsrf};if(this.form.id===null){if(!(await fetch(this.route,{method:"POST",body:t,headers:n})).ok)return;await this.getRatings()}else{if(t.append("id",this.form.id),!(await fetch(this.route,{method:"PUT",body:t,headers:n})).ok)return;await this.getRatings()}this.cancelEdit()}},getRatings:async function(){let e=await d();this.ratings=e.data},deleteRating:async function(e){if(confirm("Delete permanently?")){if((await r(e.id,{RequestVerificationToken:this.xcsrf})).ok)await this.getRatings()}},editRating:function(e){this.form.name=e.name,this.form.color=e.color,this.form.id=e.id,this.form.order=e.order,this.form.blacklist=e.blacklistedByDefault,this.form.desc=e.description},cancelEdit:function(){for(let e of Object.keys(this.form))this.form[e]=null;this.$refs.file.value=null}},async mounted(){this.xcsrf=document.querySelector("[name=__RequestVerificationToken]").value,await this.getRatings()}});

//# debugId=247D700D6E4F2E4664756E2164756E21
