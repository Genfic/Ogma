async function o(t,a,n,i,r){let s=await fetch(t,{method:a,headers:{"Content-Type":"application/json",...i},body:n?JSON.stringify(n):null,...r}),d=s.headers.get("content-type"),e;if(d?.includes("application/json"))e=await s.json();else e=await s.text();return{ok:s.ok,status:s.status,statusText:s.statusText,headers:s.headers,data:e}}var m=async(t,a,n)=>await o("/api/chaptersread","DELETE",t,a,n);var c=async(t,a,n)=>await o(`/api/chaptersread/${t}`,"GET",void 0,a,n);var l=async(t,a,n)=>await o("/api/chaptersread","POST",t,a,n);(async()=>{let t=document.querySelector("[data-story-id]"),a=document.querySelector("[data-x-csrf]"),n=[...document.querySelectorAll("button.read-status")];t.remove(),a.remove();let i=[];await d();for(let e of n)e.addEventListener("click",()=>r(Number.parseInt(e.dataset.id)));let r=async(e)=>{let p=await(i.includes(e)?m:l)({story:Number.parseInt(t.dataset.storyId),chapter:e},{RequestVerificationToken:a.dataset["x-csrf"]});if(!p.ok)return;i=p.data,s()};function s(){for(let e of n){let u=i?.includes(Number.parseInt(e.dataset.id))??!1;e.classList.toggle("active",u),e.querySelector("use").setAttribute("href",u?"/svg/spritesheet.svg#lucide:eye":"/svg/spritesheet.svg#lucide:eye-off")}}async function d(){let e=await c(Number.parseInt(t.dataset.storyId));if(!e.ok)return;i=e.data,s()}})();

//# debugId=0B27BE7F4CCBF23064756E2164756E21
//# sourceMappingURL=chapter-reads.js.map
