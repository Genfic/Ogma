import{c as b,q as t}from"./chunk-rnytdpz1.js";import{A as B,B as G,C as h,D as H,F as k,H as Y,I as m,J as p,K as R,L as I,N as J,P as d,Q as v,R as f,S as E,T,U as c,_ as i,ba as u,ca as _,da as s,fa as a,ja as r,x as F,y as z}from"./chunk-hmv3z8hd.js";var j6=J("<p>Thank you, your report has been submitted.</p>"),B6=J('<label class="svelte-1z6fkh6uqgs4d"><input type="radio" name="report-reason" required> </label>'),C6=J('<div class="additional-info svelte-1z6fkh6uqgs4d"><label for="report-info" class="svelte-1z6fkh6uqgs4d">Please provide additional information:</label> <textarea id="report-info" rows="3" class="svelte-1z6fkh6uqgs4d"></textarea></div>'),D6=J('<p class="error svelte-1z6fkh6uqgs4d"> </p>'),F6=J('<form class="svelte-1z6fkh6uqgs4d"><p>Please select a reason for reporting this content:</p> <div class="reasons svelte-1z6fkh6uqgs4d"></div> <!> <!></form>'),G6=J('<div slot="footer"><button type="button" class="button secondary svelte-1z6fkh6uqgs4d">Cancel</button> <button type="submit" class="button primary svelte-1z6fkh6uqgs4d"><!></button></div>');function o(e,U){m(U,!0);let n=[],$=[{id:"spam",text:"Spam or Advertising"},{id:"abuse",text:"Abuse or Harassment"},{id:"illegal",text:"Illegal Content"},{id:"copyright",text:"Copyright Violation"},{id:"other",text:"Other Issue"}],V=F(null),C=F(null),W=F(""),K=F(!1),L=F(null),X=F(!1);async function k6(){if(!k(C)||k(K))return;z(K,!0),z(L,null),z(X,!1);try{let g=await t({report:{target_id:U.contentId.toString(),target_type:U.contentType,reason:k(C),info:k(W)}},{RequestVerificationToken:U.csrf});if(g.ok)z(X,!0),setTimeout(()=>{Z()},2000);else b.error(`Failed to submit report: ${g.statusText}`,g.data),z(L,g.data?.message||"Failed to submit report. Please try again.",!0)}catch(g){b.error("Error submitting report:",g),z(L,"An unexpected error occurred. Please try again.")}finally{z(K,!1)}}function z6(){z(X,!1),z(L,null),z(C,null),z(W,""),k(V)?.openModal()}function Z(){k(V)?.closeModal()}var l=v(),y6=h(l);return s(Modal(y6,{label:"Report Content",children:(g,g6)=>{var N=v(),P=h(N);{var Q=(x)=>{var A=j6();f(x,A)},M=(x)=>{var A=F6(),q=H(G(A),2);c(q,21,()=>$,(w)=>w.id,(w,y)=>{var j=B6(),D=G(j);i(D);var S,x6=H(D);B(j),Y(()=>{if(S!==(S=k(y).id))D.value=(D.__value=k(y).id)==null?"":k(y).id;E(x6,` ${k(y).text??""}`)}),_(n,[],D,()=>{return k(y).id,k(C)},(A6)=>z(C,A6)),f(w,j)}),B(q);var O=H(q,2);{var w6=(w)=>{var y=C6(),j=H(G(y),2);R(j),B(y),u(j,()=>k(W),(D)=>z(W,D)),f(w,y)};T(O,(w)=>{if(k(C)==="other")w(w6)})}var f6=H(O,2);{var q6=(w)=>{var y=D6(),j=G(y,!0);B(y),Y(()=>E(j,k(L))),f(w,y)};T(f6,(w)=>{if(k(L))w(q6)})}B(A),I("submit",A,a(k6)),f(x,A)};T(P,(x)=>{if(k(X))x(Q);else x(M,!1)})}f(g,N)},$$slots:{default:!0,footer:(g,g6)=>{var N=G6(),P=G(N),Q=H(P,2),M=G(Q);{var x=(q)=>{var O=d("Submitting...");f(q,O)},A=(q)=>{var O=d("Submit Report");f(q,O)};T(M,(q)=>{if(k(K))q(x);else q(A,!1)})}B(Q),B(N),Y(()=>{P.disabled=k(K),Q.disabled=!k(C)||k(K)}),I("click",P,Z),f(g,N)}}}),(g)=>z(V,g,!0),()=>k(V)),f(e,l),p({open:z6,close:Z})}var W6=o;if(customElements.get("my-element")==null)customElements.define("my-element",r(o,{contentType:{},contentId:{},csrf:{}},[],["open","close"],!0));export{W6 as default};

//# debugId=D83DBF888C48B54664756E2164756E21
//# sourceMappingURL=ReportModal.js.map
