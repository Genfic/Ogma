{
  "version": 3,
  "sources": ["..\\..\\..\\FrontendCode\\typescript\\svelte-webcomponents\\ReportModal.svelte"],
  "sourcesContent": [
    "import 'svelte/internal/disclose-version';\nimport * as $ from 'svelte/internal/client';\nimport { log } from \"../src-helpers/logger\";\nimport { PostApiReports as postReport } from \"../generated/paths-public\";\n\nvar root_2 = $.template(`<p>Thank you, your report has been submitted.</p>`);\nvar root_4 = $.template(`<label class=\"svelte-1z6fkh6uqgs4d\"><input type=\"radio\" name=\"report-reason\" required> </label>`);\nvar root_5 = $.template(`<div class=\"additional-info svelte-1z6fkh6uqgs4d\"><label for=\"report-info\" class=\"svelte-1z6fkh6uqgs4d\">Please provide additional information:</label> <textarea id=\"report-info\" rows=\"3\" class=\"svelte-1z6fkh6uqgs4d\"></textarea></div>`);\nvar root_6 = $.template(`<p class=\"error svelte-1z6fkh6uqgs4d\"> </p>`);\nvar root_3 = $.template(`<form class=\"svelte-1z6fkh6uqgs4d\"><p>Please select a reason for reporting this content:</p> <div class=\"reasons svelte-1z6fkh6uqgs4d\"></div> <!> <!></form>`);\nvar root_7 = $.template(`<div slot=\"footer\"><button type=\"button\" class=\"button secondary svelte-1z6fkh6uqgs4d\">Cancel</button> <button type=\"submit\" class=\"button primary svelte-1z6fkh6uqgs4d\"><!></button></div>`);\n\nfunction ReportModal($$anchor, $$props) {\n\t$.push($$props, true);\n\n\tconst binding_group = [];\n\n\t// Assuming reasons are fetched or defined elsewhere\n\tconst reportReasons = [\n\t\t{ id: \"spam\", text: \"Spam or Advertising\" },\n\t\t{ id: \"abuse\", text: \"Abuse or Harassment\" },\n\t\t{ id: \"illegal\", text: \"Illegal Content\" },\n\t\t{ id: \"copyright\", text: \"Copyright Violation\" },\n\t\t{ id: \"other\", text: \"Other Issue\" }\n\t];\n\n\t// State\n\tlet modalRef = $.state(null); // Reference to the Modal component instance\n\tlet selectedReason = $.state(null);\n\tlet additionalInfo = $.state(\"\");\n\tlet isSubmitting = $.state(false);\n\tlet submitError = $.state(null);\n\tlet submitSuccess = $.state(false);\n\n\tasync function handleSubmit() {\n\t\tif (!$.get(selectedReason) || $.get(isSubmitting)) return;\n\t\t$.set(isSubmitting, true);\n\t\t$.set(submitError, null);\n\t\t$.set(submitSuccess, false);\n\n\t\ttry {\n\t\t\tconst result = await postReport(\n\t\t\t\t{\n\t\t\t\t\treport: {\n\t\t\t\t\t\ttarget_id: $$props.contentId.toString(), // API might expect string\n\t\t\t\t\t\ttarget_type: $$props.contentType,\n\t\t\t\t\t\treason: $.get(selectedReason),\n\t\t\t\t\t\tinfo: $.get(additionalInfo)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ RequestVerificationToken: $$props.csrf }\n\t\t\t);\n\n\t\t\tif (result.ok) {\n\t\t\t\t$.set(submitSuccess, true);\n\n\t\t\t\t// Optionally close modal after a delay or keep it open with success message\n\t\t\t\tsetTimeout(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tclose();\n\t\t\t\t\t},\n\t\t\t\t\t2000\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tlog.error(`Failed to submit report: ${result.statusText}`, result.data);\n\t\t\t\t$.set(submitError, result.data?.message || \"Failed to submit report. Please try again.\", true);\n\t\t\t}\n\t\t} catch(err) {\n\t\t\tlog.error(\"Error submitting report:\", err);\n\t\t\t$.set(submitError, \"An unexpected error occurred. Please try again.\");\n\t\t} finally {\n\t\t\t$.set(isSubmitting, false);\n\t\t}\n\t}\n\n\tfunction open() {\n\t\t$.set(submitSuccess, false); // Reset state when opening\n\t\t$.set(submitError, null);\n\t\t$.set(selectedReason, null);\n\t\t$.set(additionalInfo, \"\");\n\t\t$.get(modalRef)?.openModal();\n\t}\n\n\tfunction close() {\n\t\t$.get(modalRef)?.closeModal();\n\t}\n\n\tvar fragment = $.comment();\n\tvar node = $.first_child(fragment);\n\n\t$.bind_this(\n\t\tModal(node, {\n\t\t\tlabel: 'Report Content',\n\t\t\tchildren: ($$anchor, $$slotProps) => {\n\t\t\t\tvar fragment_1 = $.comment();\n\t\t\t\tvar node_1 = $.first_child(fragment_1);\n\n\t\t\t\t{\n\t\t\t\t\tvar consequent = ($$anchor) => {\n\t\t\t\t\t\tvar p = root_2();\n\n\t\t\t\t\t\t$.append($$anchor, p);\n\t\t\t\t\t};\n\n\t\t\t\t\tvar alternate = ($$anchor) => {\n\t\t\t\t\t\tvar form = root_3();\n\t\t\t\t\t\tvar div = $.sibling($.child(form), 2);\n\n\t\t\t\t\t\t$.each(div, 21, () => reportReasons, (reason) => reason.id, ($$anchor, reason) => {\n\t\t\t\t\t\t\tvar label = root_4();\n\t\t\t\t\t\t\tvar input = $.child(label);\n\n\t\t\t\t\t\t\t$.remove_input_defaults(input);\n\n\t\t\t\t\t\t\tvar input_value;\n\t\t\t\t\t\t\tvar text = $.sibling(input);\n\n\t\t\t\t\t\t\t$.reset(label);\n\n\t\t\t\t\t\t\t$.template_effect(() => {\n\t\t\t\t\t\t\t\tif (input_value !== (input_value = $.get(reason).id)) {\n\t\t\t\t\t\t\t\t\tinput.value = null == (input.__value = $.get(reason).id) ? '' : $.get(reason).id;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t$.set_text(text, ` ${$.get(reason).text ?? ''}`);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$.bind_group(\n\t\t\t\t\t\t\t\tbinding_group,\n\t\t\t\t\t\t\t\t[],\n\t\t\t\t\t\t\t\tinput,\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t$.get(reason).id;\n\t\t\t\t\t\t\t\t\treturn $.get(selectedReason);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t($$value) => $.set(selectedReason, $$value)\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t$.append($$anchor, label);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$.reset(div);\n\n\t\t\t\t\t\tvar node_2 = $.sibling(div, 2);\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar consequent_1 = ($$anchor) => {\n\t\t\t\t\t\t\t\tvar div_1 = root_5();\n\t\t\t\t\t\t\t\tvar textarea = $.sibling($.child(div_1), 2);\n\n\t\t\t\t\t\t\t\t$.remove_textarea_child(textarea);\n\t\t\t\t\t\t\t\t$.reset(div_1);\n\t\t\t\t\t\t\t\t$.bind_value(textarea, () => $.get(additionalInfo), ($$value) => $.set(additionalInfo, $$value));\n\t\t\t\t\t\t\t\t$.append($$anchor, div_1);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t$.if(node_2, ($$render) => {\n\t\t\t\t\t\t\t\tif ($.get(selectedReason) === 'other') $$render(consequent_1);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar node_3 = $.sibling(node_2, 2);\n\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar consequent_2 = ($$anchor) => {\n\t\t\t\t\t\t\t\tvar p_1 = root_6();\n\t\t\t\t\t\t\t\tvar text_1 = $.child(p_1, true);\n\n\t\t\t\t\t\t\t\t$.reset(p_1);\n\t\t\t\t\t\t\t\t$.template_effect(() => $.set_text(text_1, $.get(submitError)));\n\t\t\t\t\t\t\t\t$.append($$anchor, p_1);\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t$.if(node_3, ($$render) => {\n\t\t\t\t\t\t\t\tif ($.get(submitError)) $$render(consequent_2);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$.reset(form);\n\t\t\t\t\t\t$.event('submit', form, $.preventDefault(handleSubmit));\n\t\t\t\t\t\t$.append($$anchor, form);\n\t\t\t\t\t};\n\n\t\t\t\t\t$.if(node_1, ($$render) => {\n\t\t\t\t\t\tif ($.get(submitSuccess)) $$render(consequent); else $$render(alternate, false);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t$.append($$anchor, fragment_1);\n\t\t\t},\n\t\t\t$$slots: {\n\t\t\t\tdefault: true,\n\t\t\t\tfooter: ($$anchor, $$slotProps) => {\n\t\t\t\t\tvar div_2 = root_7();\n\t\t\t\t\tvar button = $.child(div_2);\n\t\t\t\t\tvar button_1 = $.sibling(button, 2);\n\t\t\t\t\tvar node_4 = $.child(button_1);\n\n\t\t\t\t\t{\n\t\t\t\t\t\tvar consequent_3 = ($$anchor) => {\n\t\t\t\t\t\t\tvar text_2 = $.text('Submitting...');\n\n\t\t\t\t\t\t\t$.append($$anchor, text_2);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tvar alternate_1 = ($$anchor) => {\n\t\t\t\t\t\t\tvar text_3 = $.text('Submit Report');\n\n\t\t\t\t\t\t\t$.append($$anchor, text_3);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t$.if(node_4, ($$render) => {\n\t\t\t\t\t\t\tif ($.get(isSubmitting)) $$render(consequent_3); else $$render(alternate_1, false);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t$.reset(button_1);\n\t\t\t\t\t$.reset(div_2);\n\n\t\t\t\t\t$.template_effect(() => {\n\t\t\t\t\t\tbutton.disabled = $.get(isSubmitting);\n\t\t\t\t\t\tbutton_1.disabled = !$.get(selectedReason) || $.get(isSubmitting);\n\t\t\t\t\t});\n\n\t\t\t\t\t$.event('click', button, close);\n\t\t\t\t\t$.append($$anchor, div_2);\n\t\t\t\t}\n\t\t\t}\n\t\t}),\n\t\t($$value) => $.set(modalRef, $$value, true),\n\t\t() => $.get(modalRef)\n\t);\n\n\t$.append($$anchor, fragment);\n\treturn $.pop({ open, close });\n}\n\nif (import.meta.hot) {\n\tReportModal = $.hmr(ReportModal, () => ReportModal[$.HMR].source);\n\n\timport.meta.hot.accept((module) => {\n\t\t$.cleanup_styles('svelte-1z6fkh6uqgs4d');\n\t\tmodule.default[$.HMR].source = ReportModal[$.HMR].source;\n\t\t$.set(ReportModal[$.HMR].source, module.default[$.HMR].original);\n\t});\n}\n\nexport default ReportModal;\n\nif (customElements.get('my-element') == null) customElements.define('my-element', $.create_custom_element(ReportModal, { contentType: {}, contentId: {}, csrf: {} }, [], ['open', 'close'], true));\nimport \"bun-svelte:ReportModal.svelte-1blw2zqsukd4a-style.css\";"
  ],
  "mappings": "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",
  "debugId": "D83DBF888C48B54664756E2164756E21",
  "names": []
}