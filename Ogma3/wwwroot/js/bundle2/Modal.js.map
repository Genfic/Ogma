{
  "version": 3,
  "sources": ["..\\..\\..\\FrontendCode\\typescript\\svelte-webcomponents\\Modal.svelte"],
  "sourcesContent": [
    "import 'svelte/internal/disclose-version';\nimport * as $ from 'svelte/internal/client';\nimport { tick } from \"svelte\"; // For focus management\nimport { trapFocus } from \"../src-helpers/trap-focus\"; // Assuming helper exists\nimport Icon from \"./Icon.svelte\"; // Assuming Icon.svelte\n\nvar root_2 = $.template(`<h2 class=\"svelte-1yvztnrosx1dl\"> </h2>`);\nvar root_1 = $.template(`<div class=\"modal-backdrop svelte-1yvztnrosx1dl\"><div class=\"modal-content svelte-1yvztnrosx1dl\" role=\"dialog\" aria-modal=\"true\" tabindex=\"-1\"><header class=\"modal-header svelte-1yvztnrosx1dl\"><!> <button aria-label=\"Close dialog\" class=\"close-button svelte-1yvztnrosx1dl\"><!></button></header> <main class=\"modal-body svelte-1yvztnrosx1dl\"><!></main> <footer class=\"modal-footer svelte-1yvztnrosx1dl\"><!></footer></div></div>`);\n\nfunction Modal($$anchor, $$props) {\n\t$.push($$props, true);\n\n\t// Props\n\tconst label = $.prop($$props, 'label', 3, \"Dialog window\"),\n\t\topen = $.prop($$props, 'open', 3, false),\n\t\tcloseOnEscape = $.prop($$props, 'closeOnEscape', 3, true),\n\t\tcloseOnBackdropClick = $.prop($$props, 'closeOnBackdropClick', 3, true);\n\n\t// Reactive state derived from prop, allowing internal control too\n\tlet isOpen = $.state($.proxy(open()));\n\tlet modalElement = $.state(void 0);\n\tlet previouslyFocusedElement = $.state(null);\n\n\t$.user_effect(() => {\n\t\t// Sync internal state if prop changes externally\n\t\tif (open() !== $.get(isOpen)) {\n\t\t\t$.set(isOpen, open());\n\t\t}\n\n\t\tif ($.get(isOpen) && $.get(modalElement)) {\n\t\t\t// Save previously focused element and trap focus\n\t\t\t$.set(previouslyFocusedElement, document.activeElement, true);\n\n\t\t\t// Need to wait for modal to be fully rendered before trapping focus\n\t\t\ttick().then(() => {\n\t\t\t\tconst focusableElement = $.get(modalElement)?.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])');\n\n\t\t\t\tif (focusableElement) {\n\t\t\t\t\tfocusableElement.focus();\n\t\t\t\t} else {\n\t\t\t\t\t// Fallback focus if no focusable elements found\n\t\t\t\t\t$.get(modalElement)?.focus();\n\t\t\t\t} // trapFocus helper needs to be adapted for Svelte element refs if necessary\n\t\t\t});\n\n\t\t\t// Add escape listener\n\t\t\tif (closeOnEscape()) {\n\t\t\t\tdocument.addEventListener(\"keydown\", handleKeyDown);\n\t\t\t}\n\t\t} else {\n\t\t\t// Cleanup: remove listener and restore focus\n\t\t\tif (closeOnEscape()) {\n\t\t\t\tdocument.removeEventListener(\"keydown\", handleKeyDown);\n\t\t\t}\n\n\t\t\t$.get(previouslyFocusedElement)?.focus();\n\t\t}\n\n\t\t// Effect cleanup\n\t\treturn () => {\n\t\t\tif (closeOnEscape()) {\n\t\t\t\tdocument.removeEventListener(\"keydown\", handleKeyDown);\n\t\t\t}\n\t\t};\n\t});\n\n\tfunction handleKeyDown(event) {\n\t\tif (event.key === \"Escape\") {\n\t\t\tcloseModal();\n\t\t}\n\t}\n\n\tfunction handleBackdropClick() {\n\t\tif (closeOnBackdropClick()) {\n\t\t\tcloseModal();\n\t\t}\n\t}\n\n\tfunction closeModal() {\n\t\tif (!$.get(isOpen)) return;\n\t\t$.set(isOpen, false);\n\t\t// Update the bindable prop if used\n\t\tif (open() !== $.get(isOpen)) {} // This assumes the parent uses bind:open={modalOpenState}\n\t}\n\n\tfunction openModal() {\n\t\tif ($.get(isOpen)) return;\n\t\t$.set(isOpen, true); // Similar logic for notifying parent if needed\n\t}\n\n\tvar fragment = $.comment();\n\tvar node = $.first_child(fragment);\n\n\t{\n\t\tvar consequent = ($$anchor) => {\n\t\t\tvar div = root_1();\n\t\t\tvar div_1 = $.child(div);\n\t\t\tvar header = $.child(div_1);\n\t\t\tvar node_1 = $.child(header);\n\n\t\t\t$.slot(node_1, $$props, 'header', {}, ($$anchor) => {\n\t\t\t\tvar h2 = root_2();\n\t\t\t\tvar text = $.child(h2, true);\n\n\t\t\t\t$.reset(h2);\n\t\t\t\t$.template_effect(() => $.set_text(text, label()));\n\t\t\t\t$.append($$anchor, h2);\n\t\t\t});\n\n\t\t\tvar button = $.sibling(node_1, 2);\n\t\t\tvar node_2 = $.child(button);\n\n\t\t\tIcon(node_2, { icon: 'lucide:x' });\n\t\t\t$.reset(button);\n\t\t\t$.reset(header);\n\n\t\t\tvar main = $.sibling(header, 2);\n\t\t\tvar node_3 = $.child(main);\n\n\t\t\t$.slot(node_3, $$props, 'default', {}, null);\n\t\t\t$.reset(main);\n\n\t\t\tvar footer = $.sibling(main, 2);\n\t\t\tvar node_4 = $.child(footer);\n\n\t\t\t$.slot(node_4, $$props, 'footer', {}, null);\n\t\t\t$.reset(footer);\n\t\t\t$.reset(div_1);\n\t\t\t$.bind_this(div_1, ($$value) => $.set(modalElement, $$value), () => $.get(modalElement));\n\t\t\t$.reset(div);\n\t\t\t$.template_effect(() => $.set_attribute(div_1, 'aria-label', label()));\n\t\t\t$.event('click', button, closeModal);\n\t\t\t$.event('click', div_1, $.stopPropagation(() => {}));\n\t\t\t$.event('click', div, handleBackdropClick);\n\t\t\t$.append($$anchor, div);\n\t\t};\n\n\t\t$.if(node, ($$render) => {\n\t\t\tif ($.get(isOpen)) $$render(consequent);\n\t\t});\n\t}\n\n\t$.append($$anchor, fragment);\n\treturn $.pop({ closeModal, openModal });\n}\n\nif (import.meta.hot) {\n\tModal = $.hmr(Modal, () => Modal[$.HMR].source);\n\n\timport.meta.hot.accept((module) => {\n\t\t$.cleanup_styles('svelte-1yvztnrosx1dl');\n\t\tmodule.default[$.HMR].source = Modal[$.HMR].source;\n\t\t$.set(Modal[$.HMR].source, module.default[$.HMR].original);\n\t});\n}\n\nexport default Modal;\n\nif (customElements.get('my-element') == null) customElements.define('my-element', $.create_custom_element(\n\tModal,\n\t{\n\t\tlabel: {},\n\t\topen: {},\n\t\tcloseOnEscape: {},\n\t\tcloseOnBackdropClick: {}\n\t},\n\t['header', 'default', 'footer'],\n\t['closeModal', 'openModal'],\n\ttrue\n));\nimport \"bun-svelte:Modal.svelte-2xahnng2qh0ti-style.css\";"
  ],
  "mappings": "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",
  "debugId": "AAF16EAF7634F87764756E2164756E21",
  "names": []
}