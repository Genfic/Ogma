{
  "version": 3,
  "sources": ["..\\..\\..\\FrontendCode\\typescript\\svelte-webcomponents\\NotificationsButton.svelte"],
  "sourcesContent": [
    "import 'svelte/internal/disclose-version';\nimport * as $ from 'svelte/internal/client';\nimport { onMount } from \"svelte\";\nimport { log } from \"../src-helpers/logger\";\nimport { GetApiNotificationsCount as countNotifications } from \"../generated/paths-public\";\nimport Icon from \"./Icon.svelte\"; // Assuming Icon.svelte\n\nvar root_1 = $.template(`<span class=\"svelte-3cxpqdu8kfwfi\"> </span>`);\nvar root_2 = $.template(`<span class=\"svelte-3cxpqdu8kfwfi\">...</span>`);\nvar root = $.template(`<a class=\"nav-link light notifications-btn svelte-3cxpqdu8kfwfi\" href=\"/notifications\"><!> <!> <!></a>`);\n\nfunction NotificationsButton($$anchor, $$props) {\n\t$.push($$props, true);\n\n\t// Reactive state for notification count\n\tlet notificationCount = $.state(null); // Use null for initial loading state\n\tlet isLoading = $.state(true);\n\n\tonMount(async () => {\n\t\ttry {\n\t\t\tconst res = await countNotifications();\n\n\t\t\tif (res.ok) {\n\t\t\t\t$.set(notificationCount, res.data, true);\n\t\t\t} else {\n\t\t\t\tlog.error(`Failed to fetch notification count: ${res.statusText}`);\n\t\t\t\t$.set(notificationCount, 0); // Set to 0 on error? Or handle differently.\n\t\t\t}\n\t\t} catch(error) {\n\t\t\tlog.error(\"Error fetching notification count:\", error);\n\t\t\t$.set(notificationCount, 0); // Set to 0 on error?\n\t\t} finally {\n\t\t\t$.set(isLoading, false);\n\t\t}\n\t});\n\n\t// Derived state for display count and title\n\tconst displayCount = $.derived(() => () => {\n\t\tif ($.get(notificationCount) === null || $.get(notificationCount) <= 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn $.get(notificationCount) <= 99 ? $.get(notificationCount).toString() : \"99+\";\n\t});\n\n\tconst linkTitle = $.derived(() => () => {\n\t\tif ($.get(notificationCount) === null || $.get(notificationCount) <= 0) {\n\t\t\treturn \"Notifications\";\n\t\t}\n\n\t\treturn `${$.get(notificationCount)} notification${$.get(notificationCount) === 1 ? \"\" : \"s\"}`;\n\t});\n\n\tvar a = root();\n\tvar node = $.child(a);\n\n\tIcon(node, {\n\t\tclass: 'material-icons-outlined',\n\t\ticon: 'lucide:bell'\n\t});\n\n\tvar node_1 = $.sibling(node, 2);\n\n\t{\n\t\tvar consequent = ($$anchor) => {\n\t\t\tvar span = root_1();\n\t\t\tvar text = $.child(span, true);\n\n\t\t\t$.reset(span);\n\t\t\t$.template_effect(() => $.set_text(text, $.get(displayCount)));\n\t\t\t$.append($$anchor, span);\n\t\t};\n\n\t\t$.if(node_1, ($$render) => {\n\t\t\tif (!$.get(isLoading) && $.get(displayCount) !== null) $$render(consequent);\n\t\t});\n\t}\n\n\tvar node_2 = $.sibling(node_1, 2);\n\n\t{\n\t\tvar consequent_1 = ($$anchor) => {\n\t\t\tvar span_1 = root_2();\n\n\t\t\t$.append($$anchor, span_1);\n\t\t};\n\n\t\t$.if(node_2, ($$render) => {\n\t\t\tif ($.get(isLoading)) $$render(consequent_1);\n\t\t});\n\t}\n\n\t$.reset(a);\n\t$.template_effect(() => $.set_attribute(a, 'title', $.get(linkTitle)));\n\t$.append($$anchor, a);\n\t$.pop();\n}\n\nif (import.meta.hot) {\n\tNotificationsButton = $.hmr(NotificationsButton, () => NotificationsButton[$.HMR].source);\n\n\timport.meta.hot.accept((module) => {\n\t\t$.cleanup_styles('svelte-3cxpqdu8kfwfi');\n\t\tmodule.default[$.HMR].source = NotificationsButton[$.HMR].source;\n\t\t$.set(NotificationsButton[$.HMR].source, module.default[$.HMR].original);\n\t});\n}\n\nexport default NotificationsButton;\n\nif (customElements.get('my-element') == null) customElements.define('my-element', $.create_custom_element(NotificationsButton, {}, [], [], true));\nimport \"bun-svelte:NotificationsButton.svelte-nse0ts7gbqe4-style.css\";"
  ],
  "mappings": "8PAOA,ZAAI,JAAW,EAAS,6CAA6C,EACjE,EAAW,EAAS,+CAA+C,EACnE,EAAS,EAAS,wGAAwG,EAE9H,SAAS,CAAmB,CAAC,EAAU,EAAS,CAC7C,EAAK,EAAS,EAAI,EAGpB,IAAI,EAAsB,EAAM,IAAI,EAChC,EAAc,EAAM,EAAI,EAE5B,EAAQ,SAAY,CACnB,GAAI,CACH,IAAM,EAAM,MAAM,EAAmB,EAErC,GAAI,EAAI,GACL,EAAI,EAAmB,EAAI,KAAM,EAAI,EAEvC,OAAI,MAAM,uCAAuC,EAAI,YAAY,EAC/D,EAAI,EAAmB,CAAC,EAE1B,MAAM,EAAO,CACd,EAAI,MAAM,qCAAsC,CAAK,EACnD,EAAI,EAAmB,CAAC,SACzB,CACC,EAAI,EAAW,EAAK,GAEvB,EAGD,IAAM,EAAiB,EAAQ,IAAM,IAAM,CAC1C,GAAM,EAAI,CAAiB,IAAM,MAAU,EAAI,CAAiB,GAAK,EACpE,OAAO,KAGR,OAAS,EAAI,CAAiB,GAAK,GAAO,EAAI,CAAiB,EAAE,SAAS,EAAI,MAC9E,EAEK,EAAc,EAAQ,IAAM,IAAM,CACvC,GAAM,EAAI,CAAiB,IAAM,MAAU,EAAI,CAAiB,GAAK,EACpE,MAAO,gBAGR,MAAO,GAAK,EAAI,CAAiB,iBAAmB,EAAI,CAAiB,IAAM,EAAI,GAAK,MACxF,EAED,IAAI,EAAI,EAAK,EACT,EAAS,EAAM,CAAC,EAEpB,EAAK,EAAM,CACV,MAAO,0BACP,KAAM,aACP,CAAC,EAED,IAAI,EAAW,EAAQ,EAAM,CAAC,EAE9B,CACC,IAAI,EAAa,CAAC,IAAa,CAC9B,IAAI,EAAO,EAAO,EACd,EAAS,EAAM,EAAM,EAAI,EAE3B,EAAM,CAAI,EACV,EAAgB,IAAQ,EAAS,EAAQ,EAAI,CAAY,CAAC,CAAC,EAC3D,EAAO,EAAU,CAAI,GAGtB,EAAG,EAAQ,CAAC,IAAa,CAC1B,IAAO,EAAI,CAAS,GAAO,EAAI,CAAY,IAAM,KAAM,EAAS,CAAU,EAC1E,CACF,CAEA,IAAI,EAAW,EAAQ,EAAQ,CAAC,EAEhC,CACC,IAAI,EAAe,CAAC,IAAa,CAChC,IAAI,EAAS,EAAO,EAElB,EAAO,EAAU,CAAM,GAGxB,EAAG,EAAQ,CAAC,IAAa,CAC1B,GAAM,EAAI,CAAS,EAAG,EAAS,CAAY,EAC3C,CACF,CAEE,EAAM,CAAC,EACP,EAAgB,IAAQ,EAAc,EAAG,QAAW,EAAI,CAAS,CAAC,CAAC,EACnE,EAAO,EAAU,CAAC,EAClB,EAAI,EAaP,IAAe,KAEf,GAAI,eAAe,IAAI,YAAY,GAAK,KAAM,eAAe,OAAO,aAAgB,EAAsB,EAAqB,CAAC,EAAG,CAAC,EAAG,CAAC,EAAG,EAAI,CAAC",
  "debugId": "E957D01FD7D746D164756E2164756E21",
  "names": []
}