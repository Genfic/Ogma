{
  "version": 3,
  "sources": ["..\\..\\..\\FrontendCode\\typescript\\src-solid\\common\\_chaptersReadData.ts", "..\\..\\..\\FrontendCode\\typescript\\src-solid\\chapter-read.tsx"],
  "sourcesContent": [
    "import { GetApiChaptersread } from \"@g/paths-public\";\r\nimport { createResource, type ResourceReturn } from \"solid-js\";\r\n\r\nlet resource: ResourceReturn<Set<number>, number>;\r\n\r\nexport const useChaptersRead = (storyId: number) => {\r\n\tif (resource) {\r\n\t\treturn resource;\r\n\t}\r\n\tresource = createResource(\r\n\t\t() => storyId,\r\n\t\tasync (id: number) => {\r\n\t\t\tconst res = await GetApiChaptersread(id);\r\n\t\t\tif (!res.ok) {\r\n\t\t\t\treturn new Set<number>();\r\n\t\t\t}\r\n\t\t\treturn new Set(res.data);\r\n\t\t},\r\n\t);\r\n\treturn resource;\r\n};\r\n",
    "import { template as _$template } from \"solid-js/web\";\nimport { delegateEvents as _$delegateEvents } from \"solid-js/web\";\nimport { setAttribute as _$setAttribute } from \"solid-js/web\";\nimport { effect as _$effect } from \"solid-js/web\";\nimport { getOwner as _$getOwner } from \"solid-js/web\";\nvar _tmpl$ = /*#__PURE__*/_$template(`<button type=button class=read-status aria-label=\"Chapter read status\"><o-icon>`, true, false, false);\nimport { customElement } from \"solid-element\";\nimport { useChaptersRead } from \"./common/_chaptersReadData\";\nimport { DeleteApiChaptersread, PostApiChaptersread } from \"@g/paths-public\";\nimport css from \"./chapter-read.css\";\nimport { Styled } from \"./common/_styled\";\nconst ChapterRead = props => {\n  const [getChaptersRead, {\n    mutate\n  }] = useChaptersRead(props.storyId);\n  const isRead = () => !getChaptersRead.loading && getChaptersRead().has(props.chapterId);\n  const markRead = async () => {\n    const client = isRead() ? DeleteApiChaptersread : PostApiChaptersread;\n    const res = await client({\n      story: props.storyId,\n      chapter: props.chapterId\n    });\n    if (!res.ok) return;\n    mutate(new Set(res.data));\n  };\n  return (() => {\n    var _el$ = _tmpl$(),\n      _el$2 = _el$.firstChild;\n    _el$.$$click = markRead;\n    _el$2._$owner = _$getOwner();\n    _$effect(_p$ => {\n      var _v$ = !!isRead(),\n        _v$2 = isRead() ? \"Mark as unread\" : \"Mark as read\",\n        _v$3 = isRead() ? \"lucide:eye\" : \"lucide:eye-closed\";\n      _v$ !== _p$.e && _el$.classList.toggle(\"active\", _p$.e = _v$);\n      _v$2 !== _p$.t && _$setAttribute(_el$, \"title\", _p$.t = _v$2);\n      _v$3 !== _p$.a && (_el$2.icon = _p$.a = _v$3);\n      return _p$;\n    }, {\n      e: undefined,\n      t: undefined,\n      a: undefined\n    });\n    return _el$;\n  })();\n};\ncustomElement(\"o-read\", {\n  chapterId: 0,\n  storyId: 0\n}, Styled(ChapterRead, css));\n_$delegateEvents([\"click\"]);"
  ],
  "mappings": "+NAGA,FAAI,JAES,JAAkB,CAAC,IAAoB,CACnD,GAAI,EACH,OAAO,EAYR,OAVA,EAAW,EACV,IAAM,EACN,MAAO,IAAe,CACrB,IAAM,EAAM,MAAM,EAAmB,CAAE,EACvC,IAAK,EAAI,GACR,OAAO,IAAI,IAEZ,OAAO,IAAI,IAAI,EAAI,IAAI,EAEzB,EACO,gOCdR,IAAI,EAAsB,EAAW,kFAAmF,GAAM,GAAO,EAAK,EAMpI,EAAc,KAAS,CAC3B,IAAO,GACL,WACG,EAAgB,EAAM,OAAO,EAC5B,EAAS,KAAO,EAAgB,SAAW,EAAgB,EAAE,IAAI,EAAM,SAAS,EAChF,EAAW,SAAY,CAE3B,IAAM,EAAM,MADG,EAAO,EAAI,EAAwB,GACzB,CACvB,MAAO,EAAM,QACb,QAAS,EAAM,SACjB,CAAC,EACD,IAAK,EAAI,GAAI,OACb,EAAO,IAAI,IAAI,EAAI,IAAI,CAAC,GAE1B,OAAQ,IAAM,CACZ,IAAI,EAAO,EAAO,EAChB,EAAQ,EAAK,WAgBf,OAfA,EAAK,QAAU,EACf,EAAM,QAAU,EAAW,EAC3B,EAAS,KAAO,CACd,IAAI,IAAQ,EAAO,EACjB,EAAO,EAAO,EAAI,iBAAmB,eACrC,EAAO,EAAO,EAAI,aAAe,oBAInC,OAHA,IAAQ,EAAI,GAAK,EAAK,UAAU,OAAO,SAAU,EAAI,EAAI,CAAG,EAC5D,IAAS,EAAI,GAAK,EAAe,EAAM,QAAS,EAAI,EAAI,CAAI,EAC5D,IAAS,EAAI,IAAM,EAAM,KAAO,EAAI,EAAI,GACjC,GACN,CACD,EAAG,OACH,EAAG,OACH,EAAG,MACL,CAAC,EACM,IACN,GAEL,EAAc,SAAU,CACtB,UAAW,EACX,QAAS,CACX,EAAG,EAAO,EAAa,CAAG,CAAC,EAC3B,EAAiB,CAAC,OAAO,CAAC",
  "debugId": "DEAE9552DE20636964756E2164756E21",
  "names": []
}