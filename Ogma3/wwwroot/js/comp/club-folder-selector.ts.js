import{b as h}from"./chunk-118zdqkz.js";import{i as V,j as T,q as G}from"./chunk-swmx46mn.js";import{A as x,D as c,E as g,F as f,G as s,H as I,I as u,J as v,M as n,N as D,O as L,w as a,x as d,y as F,z as E}from"./chunk-1dj32eyg.js";var B=s("<div class=header><img width=32 height=32><span>"),H=s("<div>"),J=s("<div class=folders>"),K=s('<div class=buttons><button type=button class="active-border add">Add</button><button type=button class="active-border cancel">Go back'),Q=s("<div>Loading folders..."),W=s("<div>Error: "),X=s("<button type=button>"),Z=s("<div class=header><span>Your clubs"),ee=s("<div class=clubs>"),te=s("<button type=button class=club><img width=48 height=48><span>"),re=s("<button type=button class=club-wc-button>Add to folder"),se=s('<div class="club-folder-selector my-modal"><div class=content>'),le=(_,{element:M})=>{D();let[N,P]=a([]),[i,R]=a(null),[w,b]=a({message:"",success:!1}),[U,Y]=a(!1),[p,y]=a(null);x(async()=>{M.classList.add("wc-loaded");let e=await V();if(e.ok)P(e.data);else h.error(`Error fetching data: ${e.statusText}`)});let[m]=E(i,async(e)=>{if(!e)throw new Error("Club not selected");let t=await T(e.id);if(!t.ok)throw new Error(t.statusText);return t.data}),C=(e)=>{R(e),y(null)},k=(e)=>{Y(e)},q=(e)=>{h.info(`Selecting folder with ID ${e.id}`),y(e)},O=async()=>{if(p()===null){b({message:"You must select a folder!",success:!1});return}let e=await G({folderId:p().id,storyId:_.storyId},{RequestVerificationToken:_.csrf});if(e.ok)b({message:"Successfully added",success:!0});else if(typeof e.data==="string")b({message:e.data.replaceAll('"',""),success:!1})},j=()=>[(()=>{var e=B(),t=e.firstChild,r=t.nextSibling;return n(r,()=>i().name),d((l)=>{var $=i().icon??"ph-250.png",o=i().name;return $!==l.e&&u(t,"src",l.e=$),o!==l.t&&u(t,"alt",l.t=o),l},{e:void 0,t:void 0}),e})(),(()=>{var e=H();return n(e,()=>w().message),d(()=>v(e,`msg ${w().success?"success":"error"}`)),e})(),(()=>{var e=J();return n(e,c(f,{get when(){return!m.loading},get fallback(){return Q()},get children(){return c(f,{get when(){return!m.error},get fallback(){return(()=>{var t=W(),r=t.firstChild;return n(t,()=>m.error?.message,null),t})()},get children(){return c(g,{get each(){return m()},children:(t)=>(()=>{var r=X();return r.$$click=()=>q(t),n(r,()=>t.name),d(()=>v(r,`folder ${!t.canAdd?"locked":""} ${p()?.id===t.id?"active":""}`)),r})()})}})}})),e})(),(()=>{var e=K(),t=e.firstChild,r=t.nextSibling;return t.$$click=O,r.$$click=()=>C(null),e})()],z=()=>[Z(),(()=>{var e=ee();return n(e,c(g,{get each(){return N()},children:(t)=>(()=>{var r=te(),l=r.firstChild,$=l.nextSibling;return r.$$click=()=>C(t),n($,()=>t.name),d((o)=>{var S=t.icon??"ph-250.png",A=t.name;return S!==o.e&&u(l,"src",o.e=S),A!==o.t&&u(l,"alt",o.t=A),o},{e:void 0,t:void 0}),r})()})),e})()];return[(()=>{var e=re();return e.$$click=()=>k(!0),e})(),c(f,{get when(){return U()},get children(){var e=se(),t=e.firstChild;return e.$$click=()=>k(!1),t.$$click=(r)=>r.stopPropagation(),n(t,(()=>{var r=F(()=>i()!==null);return()=>r()?j():z()})()),e}})]};L("o-club-folder-selector",{storyId:0,csrf:""},le);I(["click"]);

//# debugId=24D0899371694E8264756E2164756E21
