import{e as A}from"./chunk-w930pszp.js";import{v as D}from"./chunk-gma6eqe0.js";import"./chunk-qtq4kp2t.js";import{$ as V,F as r,G as R,J as S,M as N,S as M,T as _,U as d,V as B,Z as l,aa as k}from"./chunk-59rmnzyw.js";var c={MinReasonLength:30,MaxReasonLength:500};var j=M('<form class=form><div class=o-form-group><label for=reason>Reason</label><textarea name=reason id=reason class="o-form-control active-border"rows=5></textarea><div class=counter><div class=o-progress-bar></div><span>/<!> chars</span></div></div><div class=o-form-group><button type=submit>'),z=M("<span>Report"),G=(n)=>{V();let a={min:c.MinReasonLength,max:c.MaxReasonLength},[w,E]=r(),[s,P]=r(""),[W,F]=r(null);S(()=>{if(n.openSelector){let t=document.querySelector(n.openSelector);if(t)t.addEventListener("click",H);else console.log(`Element for selector ${n.openSelector} not found`)}});let H=()=>{w().open()},L=()=>s()&&s().length>=a.min&&s().length<=a.max,u=()=>s().length,x=()=>{switch(W()){case!0:return{msg:"Report delivered!",cls:"green"};case!1:return{msg:"An error has occurred. Retry?",cls:"red"};default:return{msg:"Send report",cls:null}}},I=async(t)=>{if(t.preventDefault(),!L())return;let o=await D({itemId:n.itemId,reason:s(),itemType:n.itemType},{RequestVerificationToken:n.csrf});F(o.ok)},q=(t)=>{let o=t.currentTarget.value;P(o)};return N(A,{ref:E,get header(){return z()},get children(){var t=j(),o=t.firstChild,O=o.firstChild,i=O.nextSibling,f=i.nextSibling,g=f.firstChild,h=g.nextSibling,p=h.firstChild,C=p.nextSibling,J=C.nextSibling,U=o.nextSibling,T=U.firstChild;return t.addEventListener("submit",I),i.$$input=q,l(h,u,p),l(h,()=>a.max,C),l(T,()=>x().msg),R((e)=>{var{min:v,max:b}=a,y=!L(),m=`${Math.min(100,100*(u()/a.max))}%`,$=`btn ${x().cls}`;return v!==e.e&&d(i,"minlength",e.e=v),b!==e.t&&d(i,"maxlength",e.t=b),y!==e.a&&f.classList.toggle("invalid",e.a=y),m!==e.o&&((e.o=m)!=null?g.style.setProperty("width",m):g.style.removeProperty("width")),$!==e.i&&B(T,e.i=$),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t}})};k("report-modal",{openSelector:"",csrf:"",itemId:0,itemType:""},G);_(["input"]);

//# debugId=24A826D4275E561664756E2164756E21
