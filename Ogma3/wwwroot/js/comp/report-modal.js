import{e as A}from"./chunk-w3kd6bb3.js";import{x as D}from"./chunk-dr8dmza4.js";import"./chunk-v3754c6r.js";import{H as i,I as R,M as S,P as N,W as M,X as _,Y as d,Z as B,ba as l,da as V,ea as k}from"./chunk-p9p4607h.js";var m={MinReasonLength:30,MaxReasonLength:500};var Y=M('<form class=form><div class=o-form-group><label for=reason>Reason</label><textarea name=reason id=reason class="o-form-control active-border"rows=5></textarea><div class=counter><div class=o-progress-bar></div><span>/<!> chars</span></div></div><div class=o-form-group><button type=submit>'),j=M("<span>Report"),z=(n)=>{V();let a={min:m.MinReasonLength,max:m.MaxReasonLength},[w,E]=i(),[s,P]=i(""),[W,F]=i(null);S(()=>{if(n.openSelector){let t=document.querySelector(n.openSelector);if(t)t.addEventListener("click",H);else console.log(`Element for selector ${n.openSelector} not found`)}});let H=()=>{w().open()},x=()=>s()&&s().length>=a.min&&s().length<=a.max,L=()=>s().length,u=()=>{switch(W()){case!0:return{msg:"Report delivered!",cls:"green"};case!1:return{msg:"An error has occurred. Retry?",cls:"red"};default:return{msg:"Send report",cls:null}}},I=async(t)=>{if(t.preventDefault(),!x())return;let o=await D({itemId:n.itemId,reason:s(),itemType:n.itemType},{RequestVerificationToken:n.csrf});F(o.ok)},q=(t)=>{let o=t.currentTarget.value;P(o)};return N(A,{ref:E,get header(){return j()},get children(){var t=Y(),o=t.firstChild,O=o.firstChild,r=O.nextSibling,p=r.nextSibling,g=p.firstChild,c=g.nextSibling,f=c.firstChild,T=f.nextSibling,G=T.nextSibling,U=o.nextSibling,v=U.firstChild;return t.addEventListener("submit",I),r.$$input=q,l(c,L,f),l(c,()=>a.max,T),l(v,()=>u().msg),R((e)=>{var{min:b,max:y}=a,$=!x(),h=`${Math.min(100,100*(L()/a.max))}%`,C=`btn ${u().cls}`;return b!==e.e&&d(r,"minlength",e.e=b),y!==e.t&&d(r,"maxlength",e.t=y),$!==e.a&&p.classList.toggle("invalid",e.a=$),h!==e.o&&((e.o=h)!=null?g.style.setProperty("width",h):g.style.removeProperty("width")),C!==e.i&&B(v,e.i=C),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t}})};k("report-modal",{openSelector:"",csrf:"",itemId:0,itemType:""},z);_(["input"]);

//# debugId=778B3CBF4541BCC864756E2164756E21
