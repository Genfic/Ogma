import{d as M}from"./chunk-rm1dqpb3.js";import{e as v}from"./chunk-5k1k13kq.js";import{l as I,m as T,t as R}from"./chunk-k4ry6v6w.js";import"./chunk-s8q2er36.js";import{E as i,F as u,G as S,H as A,I as F,L as o,N as p,P as D,Q as $,R as l,S as E,T as m,U as x,Y as a,Z as G,_ as L}from"./chunk-qcet3yp8.js";var B=l("<div class=header><img width=32 height=32><span>"),H=l("<div>"),J=l("<div>Loading folders..."),K=l("<div>Error fetching folders"),Q=l("<div class=folders>"),W=l('<div class=buttons><button type=button class="active-border add">Add</button><button type=button class="active-border cancel">Go back'),X=l("<div>This club has no folders"),Z=l("<button type=button class=folder>"),ee=l("<div class=header><span>Your clubs"),te=l("<div class=clubs>"),re=l("<div>You're not a member of any clubs"),se=l("<button type=button class=club><img width=48 height=48><span>"),le=l("<button type=button class=club-wc-button>Add to folder"),ne=l("<div class=content>"),oe=(h)=>{G();let[V,Y]=i([]),[d,N]=i(null),[_,g]=i({message:"",success:!1}),[b,w]=i(null),[U,q]=i();F(async()=>{let e=await I();if(e.ok)Y(e.data);else v.error(`Error fetching data: ${e.statusText}`)});let[f]=A(d,async(e)=>{if(!e)throw new Error("Club not selected");let t=await T(e.id);if(!t.ok)throw new Error(t.statusText);return t.data}),k=(e)=>{N(e),w(null)},O=(e)=>{v.info(`Selecting folder with ID ${e.id}`),w(e)},P=async()=>{if(b()===null){g({message:"You must select a folder!",success:!1});return}let e=await R({folderId:b().id,storyId:h.storyId},{RequestVerificationToken:h.csrf});if(e.ok)g({message:"Successfully added",success:!0});else if(typeof e.data==="string")g({message:e.data.replaceAll('"',""),success:!1})},j=()=>[(()=>{var e=B(),t=e.firstChild,r=t.nextSibling;return a(r,()=>d().name),u((s)=>{var c=d().icon??"ph-250.png",n=d().name;return c!==s.e&&m(t,"src",s.e=c),n!==s.t&&m(t,"alt",s.t=n),s},{e:void 0,t:void 0}),e})(),(()=>{var e=H();return a(e,()=>_().message),u(()=>x(e,`msg ${_().success?"success":"error"}`)),e})(),(()=>{var e=Q();return a(e,o(D,{get children(){return[o($,{get when(){return f.loading},get children(){return J()}}),o($,{get when(){return f.error},get children(){return K()}}),o($,{when:f,get children(){return o(p,{get each(){return f()},get fallback(){return X()},children:(t)=>(()=>{var r=Z();return r.$$click=O,r.$$clickData=t,a(r,()=>t.name),u((s)=>{var c=!t.canAdd,n=b()?.id===t.id;return c!==s.e&&r.classList.toggle("locked",s.e=c),n!==s.t&&r.classList.toggle("active",s.t=n),s},{e:void 0,t:void 0}),r})()})}})]}})),e})(),(()=>{var e=W(),t=e.firstChild,r=t.nextSibling;return t.$$click=P,r.$$click=k,r.$$clickData=null,e})()],z=()=>[ee(),(()=>{var e=te();return a(e,o(p,{get each(){return V()},get fallback(){return re()},children:(t)=>(()=>{var r=se(),s=r.firstChild,c=s.nextSibling;return r.$$click=k,r.$$clickData=t,a(c,()=>t.name),u((n)=>{var y=t.icon??"ph-250.png",C=t.name;return y!==n.e&&m(s,"src",n.e=y),C!==n.t&&m(s,"alt",n.t=C),n},{e:void 0,t:void 0}),r})()})),e})()];return[(()=>{var e=le();return e.$$click=()=>U()?.open(),e})(),o(M,{ref:q,classes:"club-folder-selector",get children(){var e=ne();return a(e,(()=>{var t=S(()=>d()!==null);return()=>t()?j():z()})()),e}})]};L("o-club-folder-selector",{storyId:0,csrf:""},oe);E(["click"]);

//# debugId=E8B6464D65B7F97764756E2164756E21
