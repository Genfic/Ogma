import{g as M}from"./chunk-b4a90cba.js";import{h as v}from"./chunk-gchvq6pe.js";import{o as I,p as T,w as L}from"./chunk-1pgp53hp.js";import"./chunk-v3754c6r.js";import{$ as R,G as i,H as u,I as S,J as A,K as F,N as o,P as p,R as D,S as $,T as l,U as E,V as m,W as x,_ as a,aa as G}from"./chunk-3v8fzpj7.js";var H=l("<div class=header><img width=32 height=32><span>"),J=l("<div>"),K=l("<div>Loading folders..."),Q=l("<div>Error fetching folders"),W=l("<div class=folders>"),X=l('<div class=buttons><button type=button class="active-border add">Add</button><button type=button class="active-border cancel">Go back'),Z=l("<div>This club has no folders"),ee=l("<button type=button class=folder>"),te=l("<div class=header><span>Your clubs"),re=l("<div class=clubs>"),se=l("<div>You're not a member of any clubs"),le=l("<button type=button class=club><img width=48 height=48><span>"),ne=l("<button type=button class=club-wc-button>Add to folder"),oe=l("<div class=content>"),ae=(h,{element:V})=>{R();let[Y,N]=i([]),[d,U]=i(null),[_,g]=i({message:"",success:!1}),[b,w]=i(null),[q,O]=i();F(async()=>{V.classList.add("wc-loaded");let e=await I();if(e.ok)N(e.data);else v.error(`Error fetching data: ${e.statusText}`)});let[f]=A(d,async(e)=>{if(!e)throw new Error("Club not selected");let t=await T(e.id);if(!t.ok)throw new Error(t.statusText);return t.data}),k=(e)=>{U(e),w(null)},P=(e)=>{v.info(`Selecting folder with ID ${e.id}`),w(e)},j=async()=>{if(b()===null){g({message:"You must select a folder!",success:!1});return}let e=await L({folderId:b().id,storyId:h.storyId},{RequestVerificationToken:h.csrf});if(e.ok)g({message:"Successfully added",success:!0});else if(typeof e.data==="string")g({message:e.data.replaceAll('"',""),success:!1})},z=()=>[(()=>{var e=H(),t=e.firstChild,r=t.nextSibling;return a(r,()=>d().name),u((s)=>{var c=d().icon??"ph-250.png",n=d().name;return c!==s.e&&m(t,"src",s.e=c),n!==s.t&&m(t,"alt",s.t=n),s},{e:void 0,t:void 0}),e})(),(()=>{var e=J();return a(e,()=>_().message),u(()=>x(e,`msg ${_().success?"success":"error"}`)),e})(),(()=>{var e=W();return a(e,o(D,{get children(){return[o($,{get when(){return f.loading},get children(){return K()}}),o($,{get when(){return f.error},get children(){return Q()}}),o($,{when:f,get children(){return o(p,{get each(){return f()},get fallback(){return Z()},children:(t)=>(()=>{var r=ee();return r.$$click=P,r.$$clickData=t,a(r,()=>t.name),u((s)=>{var c=!t.canAdd,n=b()?.id===t.id;return c!==s.e&&r.classList.toggle("locked",s.e=c),n!==s.t&&r.classList.toggle("active",s.t=n),s},{e:void 0,t:void 0}),r})()})}})]}})),e})(),(()=>{var e=X(),t=e.firstChild,r=t.nextSibling;return t.$$click=j,r.$$click=k,r.$$clickData=null,e})()],B=()=>[te(),(()=>{var e=re();return a(e,o(p,{get each(){return Y()},get fallback(){return se()},children:(t)=>(()=>{var r=le(),s=r.firstChild,c=s.nextSibling;return r.$$click=k,r.$$clickData=t,a(c,()=>t.name),u((n)=>{var y=t.icon??"ph-250.png",C=t.name;return y!==n.e&&m(s,"src",n.e=y),C!==n.t&&m(s,"alt",n.t=C),n},{e:void 0,t:void 0}),r})()})),e})()];return[(()=>{var e=ne();return e.$$click=()=>q()?.open(),e})(),o(M,{ref:O,classes:"club-folder-selector",get children(){var e=oe();return a(e,(()=>{var t=S(()=>d()!==null);return()=>t()?z():B()})()),e}})]};G("o-club-folder-selector",{storyId:0,csrf:""},ae);E(["click"]);

//# debugId=03535CC5A67A2CB864756E2164756E21
