import{e as L}from"./chunk-fdmc2csy.js";import{m as I,n as x,u as R}from"./chunk-gma6eqe0.js";import"./chunk-qtq4kp2t.js";import{$ as T,F as i,G as u,H as A,I as v,M as a,O as h,Q as F,R as g,S as l,T as D,U as m,V as E,Z as o,aa as G}from"./chunk-59rmnzyw.js";var B=l("<div class=header><img width=32 height=32><span>"),H=l("<div>"),J=l("<div>Loading folders..."),K=l("<div>Error fetching folders"),Q=l("<div class=folders>"),W=l('<div class=buttons><button type=button class="active-border add">Add</button><button type=button class="active-border cancel">Go back'),X=l("<div>This club has no folders"),Z=l("<button type=button class=folder>"),ee=l("<div class=header><span>Your clubs"),te=l("<div class=clubs>"),se=l("<div>You're not a member of any clubs"),re=l("<button type=button class=club><img width=48 height=48><span>"),le=l("<button type=button class=club-wc-button>Add to folder"),ne=l("<div class=content>"),ae=(_)=>{T();let[O,V]=i(!1),[d,k]=i(null),[w,f]=i({message:"",success:!1}),[b,p]=i(null),[Y,M]=i(),[N]=v(O,async(e)=>{if(!e)return null;let t=await I();return t.ok?t.data:null}),[$]=v(d,async(e)=>{if(!e)throw new Error("Club not selected");let t=await x(e.id);if(!t.ok)throw new Error(t.statusText);return t.data}),U=()=>{k(null),p(null),f({message:"",success:!1})},q=()=>{V(!0),Y().open()},y=(e)=>{k(e),p(null)},P=async()=>{if(b()===null){f({message:"You must select a folder!",success:!1});return}let e=await R({folderId:b().id,storyId:_.storyId},{RequestVerificationToken:_.csrf});if(e.ok)f({message:"Successfully added",success:!0});else if(typeof e.data==="string")f({message:e.data,success:!1})},j=()=>[(()=>{var e=B(),t=e.firstChild,s=t.nextSibling;return o(s,()=>d().name),u((r)=>{var c=d().icon??"ph-250.png",n=d().name;return c!==r.e&&m(t,"src",r.e=c),n!==r.t&&m(t,"alt",r.t=n),r},{e:void 0,t:void 0}),e})(),(()=>{var e=H();return o(e,()=>w().message),u(()=>E(e,`msg ${w().success?"success":"error"}`)),e})(),(()=>{var e=Q();return o(e,a(F,{get children(){return[a(g,{get when(){return $.loading},get children(){return J()}}),a(g,{get when(){return $.error},get children(){return K()}}),a(g,{when:$,get children(){return a(h,{get each(){return $()},get fallback(){return X()},children:(t)=>(()=>{var s=Z();return s.$$click=p,s.$$clickData=t,o(s,()=>t.name),u((r)=>{var c=!t.canAdd,n=b()?.id===t.id;return c!==r.e&&s.classList.toggle("locked",r.e=c),n!==r.t&&s.classList.toggle("active",r.t=n),r},{e:void 0,t:void 0}),s})()})}})]}})),e})(),(()=>{var e=W(),t=e.firstChild,s=t.nextSibling;return t.$$click=P,s.$$click=y,s.$$clickData=null,e})()],z=()=>[ee(),(()=>{var e=te();return o(e,a(h,{get each(){return N()},get fallback(){return se()},children:(t)=>(()=>{var s=re(),r=s.firstChild,c=r.nextSibling;return s.$$click=y,s.$$clickData=t,o(c,()=>t.name),u((n)=>{var C=t.icon??"ph-250.png",S=t.name;return C!==n.e&&m(r,"src",n.e=C),S!==n.t&&m(r,"alt",n.t=S),n},{e:void 0,t:void 0}),s})()})),e})()];return[(()=>{var e=le();return e.$$click=q,e})(),a(L,{ref:M,onClose:U,classes:"club-folder-selector",get children(){var e=ne();return o(e,(()=>{var t=A(()=>d()!==null);return()=>t()?j():z()})()),e}})]};G("o-club-folder-selector",{storyId:0,csrf:""},ae);D(["click"]);

//# debugId=6063E740B229D1A264756E2164756E21
