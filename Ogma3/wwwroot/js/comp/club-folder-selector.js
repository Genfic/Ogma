import{b as M}from"./common/dialog.js";import{c as v}from"./chunk-sx0ed2ft.js";import{j as I,k as T,r as L}from"./chunk-yqjz5kwv.js";import{x as R,y as G}from"./chunk-ap729v4f.js";import{A as i,B as u,C as S,D as A,E as F,H as o,J as p,L as E,M as $,N as s,O as x,P as m,Q as D,U as a}from"./chunk-y7y724mm.js";var H=s("<div class=header><img width=32 height=32><span>"),J=s("<div>"),K=s("<div>Loading folders..."),Q=s("<div>Error fetching folders"),W=s("<div class=folders>"),X=s('<div class=buttons><button type=button class="active-border add">Add</button><button type=button class="active-border cancel">Go back'),Z=s("<div>This club has no folders"),ee=s("<button type=button class=folder>"),te=s("<div class=header><span>Your clubs"),re=s("<div class=clubs>"),se=s("<div>You're not a member of any clubs"),le=s("<button type=button class=club><img width=48 height=48><span>"),ne=s("<button type=button class=club-wc-button>Add to folder"),oe=s("<div class=content>"),ae=(h,{element:V})=>{R();let[Y,N]=i([]),[d,U]=i(null),[_,g]=i({message:"",success:!1}),[b,w]=i(null),[q,O]=i();F(async()=>{V.classList.add("wc-loaded");let e=await I();if(e.ok)N(e.data);else v.error(`Error fetching data: ${e.statusText}`)});let[f]=A(d,async(e)=>{if(!e)throw new Error("Club not selected");let t=await T(e.id);if(!t.ok)throw new Error(t.statusText);return t.data}),y=(e)=>{U(e),w(null)},P=(e)=>{v.info(`Selecting folder with ID ${e.id}`),w(e)},j=async()=>{if(b()===null){g({message:"You must select a folder!",success:!1});return}let e=await L({folderId:b().id,storyId:h.storyId},{RequestVerificationToken:h.csrf});if(e.ok)g({message:"Successfully added",success:!0});else if(typeof e.data==="string")g({message:e.data.replaceAll('"',""),success:!1})},z=()=>[(()=>{var e=H(),t=e.firstChild,l=t.nextSibling;return a(l,()=>d().name),u((r)=>{var c=d().icon??"ph-250.png",n=d().name;return c!==r.e&&m(t,"src",r.e=c),n!==r.t&&m(t,"alt",r.t=n),r},{e:void 0,t:void 0}),e})(),(()=>{var e=J();return a(e,()=>_().message),u(()=>D(e,`msg ${_().success?"success":"error"}`)),e})(),(()=>{var e=W();return a(e,o(E,{get children(){return[o($,{get when(){return f.loading},get children(){return K()}}),o($,{get when(){return f.error},get children(){return Q()}}),o($,{when:f,get children(){return o(p,{get each(){return f()},get fallback(){return Z()},children:(t)=>(()=>{var l=ee();return l.$$click=P,l.$$clickData=t,a(l,()=>t.name),u((r)=>{var c=!t.canAdd,n=b()?.id===t.id;return c!==r.e&&l.classList.toggle("locked",r.e=c),n!==r.t&&l.classList.toggle("active",r.t=n),r},{e:void 0,t:void 0}),l})()})}})]}})),e})(),(()=>{var e=X(),t=e.firstChild,l=t.nextSibling;return t.$$click=j,l.$$click=()=>y(null),e})()],B=()=>[te(),(()=>{var e=re();return a(e,o(p,{get each(){return Y()},get fallback(){return se()},children:(t)=>(()=>{var l=le(),r=l.firstChild,c=r.nextSibling;return l.$$click=()=>y(t),a(c,()=>t.name),u((n)=>{var k=t.icon??"ph-250.png",C=t.name;return k!==n.e&&m(r,"src",n.e=k),C!==n.t&&m(r,"alt",n.t=C),n},{e:void 0,t:void 0}),l})()})),e})()];return[(()=>{var e=ne();return e.$$click=()=>q()?.open(),e})(),o(M,{ref:O,classes:"club-folder-selector",get children(){var e=oe();return a(e,(()=>{var t=S(()=>d()!==null);return()=>t()?z():B()})()),e}})]};G("o-club-folder-selector",{storyId:0,csrf:""},ae);x(["click"]);

//# debugId=A08FF26391FBD01964756E2164756E21
