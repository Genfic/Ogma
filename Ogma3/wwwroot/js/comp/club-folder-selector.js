import{e as G}from"./chunk-1rd4m3f1.js";import{o as I,p as R,x as T}from"./chunk-7ezcb9bq.js";import"./chunk-81baasv3.js";import{I as i,J as u,L as p,Q as a,S as v,U as F,V as $,X as s,Y as D,Z as d,_ as E,ca as o,ea as V,fa as x}from"./chunk-c15tkzxp.js";var B=s("<div>"),H=s("<div>Loading folders..."),J=s("<div>Error fetching folders"),K=s("<div class=folders>"),Q=s('<div class=buttons><button type=button class="active-border add">Add</button><button type=button class="active-border cancel">Go back'),W=s("<div>This club has no folders"),X=s("<button type=button class=folder>"),Z=s("<div class=clubs>"),ee=s("<div>You're not a member of any clubs"),te=s("<button type=button class=club><img width=48 height=48><span>"),re=s("<span>Your clubs"),se=s("<img width=32 height=32>"),le=s("<span>"),ne=s("<button type=button class=club-wc-button>Add to folder"),ae=s("<div class=content>"),oe=(h)=>{V();let[L,O]=i(!1),[w,_]=i(null),[k,m]=i({message:"",success:!1}),[g,b]=i(null),[Y,M]=i(),[N]=p(L,async(e)=>{if(!e)return null;let t=await I();return t.ok?t.data:null}),[f]=p(w,async(e)=>{if(!e)throw new Error("Club not selected");let t=await R(e.id);if(!t.ok)throw new Error(t.statusText);return t.data}),U=()=>{_(null),b(null),m({message:"",success:!1})},q=()=>{O(!0),Y().open()},y=(e)=>{_(e),b(null)},P=async()=>{if(g()===null){m({message:"You must select a folder!",success:!1});return}let e=await T({folderId:g().id,storyId:h.storyId},{RequestVerificationToken:h.csrf});if(e.ok)m({message:"Successfully added",success:!0});else if(typeof e.data==="string")m({message:e.data,success:!1})},j=()=>[(()=>{var e=B();return o(e,()=>k().message),u(()=>E(e,`msg ${k().success?"success":"error"}`)),e})(),(()=>{var e=K();return o(e,a(F,{get children(){return[a($,{get when(){return f.loading},get children(){return H()}}),a($,{get when(){return f.error},get children(){return J()}}),a($,{when:f,get children(){return a(v,{get each(){return f()},get fallback(){return W()},children:(t)=>(()=>{var r=X();return r.$$click=b,r.$$clickData=t,o(r,()=>t.name),u((l)=>{var c=!t.canAdd,n=g()?.id===t.id;return c!==l.e&&r.classList.toggle("locked",l.e=c),n!==l.t&&r.classList.toggle("active",l.t=n),l},{e:void 0,t:void 0}),r})()})}})]}})),e})(),(()=>{var e=Q(),t=e.firstChild,r=t.nextSibling;return t.$$click=P,r.$$click=y,r.$$clickData=null,e})()],z=()=>(()=>{var e=Z();return o(e,a(v,{get each(){return N()},get fallback(){return ee()},children:(t)=>(()=>{var r=te(),l=r.firstChild,c=l.nextSibling;return r.$$click=y,r.$$clickData=t,o(c,()=>t.name),u((n)=>{var S=t.icon??"ph-250.png",A=t.name;return S!==n.e&&d(l,"src",n.e=S),A!==n.t&&d(l,"alt",n.t=A),n},{e:void 0,t:void 0}),r})()})),e})(),C=()=>{let e=w();if(!e)return{view:z,head:re()};return{view:j,head:[(()=>{var t=se();return u((r)=>{var l=e.icon??"ph-250.png",c=e.name;return l!==r.e&&d(t,"src",r.e=l),c!==r.t&&d(t,"alt",r.t=c),r},{e:void 0,t:void 0}),t})(),(()=>{var t=le();return o(t,()=>e.name),t})()]}};return[(()=>{var e=ne();return e.$$click=q,e})(),a(G,{ref:M,onClose:U,get header(){return C().head},classes:["club-folder-selector"],get children(){var e=ae();return o(e,()=>C().view()),e}})]};x("o-club-folder-selector",{storyId:0,csrf:""},oe);D(["click"]);

//# debugId=D5D2EFA16975C32464756E2164756E21
