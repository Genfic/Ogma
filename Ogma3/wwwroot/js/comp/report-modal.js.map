{
  "version": 3,
  "sources": ["..\\..\\..\\FrontendCode\\typescript\\src-solid\\report-modal.tsx"],
  "sourcesContent": [
    "import { template as _$template } from \"solid-js/web\";\nimport { delegateEvents as _$delegateEvents } from \"solid-js/web\";\nimport { createComponent as _$createComponent } from \"solid-js/web\";\nimport { className as _$className } from \"solid-js/web\";\nimport { setAttribute as _$setAttribute } from \"solid-js/web\";\nimport { effect as _$effect } from \"solid-js/web\";\nimport { insert as _$insert } from \"solid-js/web\";\nvar _tmpl$ = /*#__PURE__*/_$template(`<form class=form><div class=o-form-group><label for=reason>Reason</label><textarea name=reason id=reason class=\"o-form-control active-border\"rows=5></textarea><div class=counter><div class=o-progress-bar></div><span>/<!> chars</span></div></div><div class=o-form-group><button type=submit>`),\n  _tmpl$2 = /*#__PURE__*/_$template(`<span>Report`);\nimport { PostApiReports as postReport } from \"@g/paths-public\";\nimport { customElement, noShadowDOM } from \"solid-element\";\nimport { createSignal, onMount } from \"solid-js\";\nimport { Dialog } from \"./common/_dialog\";\nimport { CReport } from \"@g/ctconfig.json\";\nconst ReportModal = props => {\n  noShadowDOM();\n  const rules = {\n    min: CReport.MinReasonLength,\n    max: CReport.MaxReasonLength\n  };\n  const [dialogRef, setDialogRef] = createSignal();\n  const [reason, setReason] = createSignal(\"\");\n  const [success, setSuccess] = createSignal(null);\n  onMount(() => {\n    if (props.openSelector) {\n      const element = document.querySelector(props.openSelector);\n      if (element) {\n        element.addEventListener(\"click\", show);\n      } else {\n        console.log(`Element for selector ${props.openSelector} not found`);\n      }\n    }\n  });\n  const show = () => {\n    dialogRef().open();\n  };\n  const validate = () => reason() && reason().length >= rules.min && reason().length <= rules.max;\n  const chars = () => reason().length;\n  const message = () => {\n    switch (success()) {\n      case true:\n        return {\n          msg: \"Report delivered!\",\n          cls: \"green\"\n        };\n      case false:\n        return {\n          msg: \"An error has occurred. Retry?\",\n          cls: \"red\"\n        };\n      default:\n        return {\n          msg: \"Send report\",\n          cls: null\n        };\n    }\n  };\n  const submit = async e => {\n    e.preventDefault();\n    if (!validate()) return;\n    const res = await postReport({\n      itemId: props.itemId,\n      reason: reason(),\n      itemType: props.itemType\n    }, {\n      RequestVerificationToken: props.csrf\n    });\n    setSuccess(res.ok);\n  };\n  const updateText = e => {\n    const value = e.currentTarget.value;\n    setReason(value);\n  };\n  return _$createComponent(Dialog, {\n    ref: setDialogRef,\n    get header() {\n      return _tmpl$2();\n    },\n    get children() {\n      var _el$ = _tmpl$(),\n        _el$2 = _el$.firstChild,\n        _el$3 = _el$2.firstChild,\n        _el$4 = _el$3.nextSibling,\n        _el$5 = _el$4.nextSibling,\n        _el$6 = _el$5.firstChild,\n        _el$7 = _el$6.nextSibling,\n        _el$8 = _el$7.firstChild,\n        _el$10 = _el$8.nextSibling,\n        _el$9 = _el$10.nextSibling,\n        _el$11 = _el$2.nextSibling,\n        _el$12 = _el$11.firstChild;\n      _el$.addEventListener(\"submit\", submit);\n      _el$4.$$input = updateText;\n      _$insert(_el$7, chars, _el$8);\n      _$insert(_el$7, () => rules.max, _el$10);\n      _$insert(_el$12, () => message().msg);\n      _$effect(_p$ => {\n        var _v$ = rules.min,\n          _v$2 = rules.max,\n          _v$3 = !validate(),\n          _v$4 = `${Math.min(100, 100 * (chars() / rules.max))}%`,\n          _v$5 = `btn ${message().cls}`;\n        _v$ !== _p$.e && _$setAttribute(_el$4, \"minlength\", _p$.e = _v$);\n        _v$2 !== _p$.t && _$setAttribute(_el$4, \"maxlength\", _p$.t = _v$2);\n        _v$3 !== _p$.a && _el$5.classList.toggle(\"invalid\", _p$.a = _v$3);\n        _v$4 !== _p$.o && ((_p$.o = _v$4) != null ? _el$6.style.setProperty(\"width\", _v$4) : _el$6.style.removeProperty(\"width\"));\n        _v$5 !== _p$.i && _$className(_el$12, _p$.i = _v$5);\n        return _p$;\n      }, {\n        e: undefined,\n        t: undefined,\n        a: undefined,\n        o: undefined,\n        i: undefined\n      });\n      return _el$;\n    }\n  });\n};\ncustomElement(\"report-modal\", {\n  openSelector: \"\",\n  csrf: \"\",\n  itemId: 0,\n  itemType: \"\"\n}, ReportModal);\n_$delegateEvents([\"input\"]);"
  ],
  "mappings": "4RAOA,FAAI,JAAsB,JAAW,mSAAmS,EACtU,EAAuB,EAAW,cAAc,EAM5C,EAAc,KAAS,CAC3B,EAAY,EACZ,IAAM,EAAQ,CACZ,IAAK,EAAQ,gBACb,IAAK,EAAQ,eACf,GACO,EAAW,GAAgB,EAAa,GACxC,EAAQ,GAAa,EAAa,EAAE,GACpC,EAAS,GAAc,EAAa,IAAI,EAC/C,EAAQ,IAAM,CACZ,GAAI,EAAM,aAAc,CACtB,IAAM,EAAU,SAAS,cAAc,EAAM,YAAY,EACzD,GAAI,EACF,EAAQ,iBAAiB,QAAS,CAAI,EAEtC,aAAQ,IAAI,wBAAwB,EAAM,wBAAwB,GAGvE,EACD,IAAM,EAAO,IAAM,CACjB,EAAU,EAAE,KAAK,GAEb,EAAW,IAAM,EAAO,GAAK,EAAO,EAAE,QAAU,EAAM,KAAO,EAAO,EAAE,QAAU,EAAM,IACtF,EAAQ,IAAM,EAAO,EAAE,OACvB,EAAU,IAAM,CACpB,OAAQ,EAAQ,OACT,GACH,MAAO,CACL,IAAK,oBACL,IAAK,OACP,MACG,GACH,MAAO,CACL,IAAK,gCACL,IAAK,KACP,UAEA,MAAO,CACL,IAAK,cACL,IAAK,IACP,IAGA,EAAS,MAAM,IAAK,CAExB,GADA,EAAE,eAAe,GACZ,EAAS,EAAG,OACjB,IAAM,EAAM,MAAM,EAAW,CAC3B,OAAQ,EAAM,OACd,OAAQ,EAAO,EACf,SAAU,EAAM,QAClB,EAAG,CACD,yBAA0B,EAAM,IAClC,CAAC,EACD,EAAW,EAAI,EAAE,GAEb,EAAa,KAAK,CACtB,IAAM,EAAQ,EAAE,cAAc,MAC9B,EAAU,CAAK,GAEjB,OAAO,EAAkB,EAAQ,CAC/B,IAAK,KACD,OAAM,EAAG,CACX,OAAO,EAAQ,MAEb,SAAQ,EAAG,CACb,IAAI,EAAO,EAAO,EAChB,EAAQ,EAAK,WACb,EAAQ,EAAM,WACd,EAAQ,EAAM,YACd,EAAQ,EAAM,YACd,EAAQ,EAAM,WACd,EAAQ,EAAM,YACd,EAAQ,EAAM,WACd,EAAS,EAAM,YACf,EAAQ,EAAO,YACf,EAAS,EAAM,YACf,EAAS,EAAO,WAyBlB,OAxBA,EAAK,iBAAiB,SAAU,CAAM,EACtC,EAAM,QAAU,EAChB,EAAS,EAAO,EAAO,CAAK,EAC5B,EAAS,EAAO,IAAM,EAAM,IAAK,CAAM,EACvC,EAAS,EAAQ,IAAM,EAAQ,EAAE,GAAG,EACpC,EAAS,KAAO,CACd,IAAgB,IAAZ,EACW,IAAb,GAAO,EACP,GAAQ,EAAS,EACjB,EAAO,GAAG,KAAK,IAAI,IAAK,KAAO,EAAM,EAAI,EAAM,IAAI,KACnD,EAAO,OAAO,EAAQ,EAAE,MAM1B,OALA,IAAQ,EAAI,GAAK,EAAe,EAAO,YAAa,EAAI,EAAI,CAAG,EAC/D,IAAS,EAAI,GAAK,EAAe,EAAO,YAAa,EAAI,EAAI,CAAI,EACjE,IAAS,EAAI,GAAK,EAAM,UAAU,OAAO,UAAW,EAAI,EAAI,CAAI,EAChE,IAAS,EAAI,KAAO,EAAI,EAAI,IAAS,KAAO,EAAM,MAAM,YAAY,QAAS,CAAI,EAAI,EAAM,MAAM,eAAe,OAAO,GACvH,IAAS,EAAI,GAAK,EAAY,EAAQ,EAAI,EAAI,CAAI,EAC3C,GACN,CACD,EAAG,OACH,EAAG,OACH,EAAG,OACH,EAAG,OACH,EAAG,MACL,CAAC,EACM,EAEX,CAAC,GAEH,EAAc,eAAgB,CAC5B,aAAc,GACd,KAAM,GACN,OAAQ,EACR,SAAU,EACZ,EAAG,CAAW,EACd,EAAiB,CAAC,OAAO,CAAC",
  "debugId": "24A826D4275E561664756E2164756E21",
  "names": []
}