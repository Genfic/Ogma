{
  "version": 3,
  "sources": ["..\\..\\..\\FrontendCode\\typescript\\src-solid\\report-modal.tsx"],
  "sourcesContent": [
    "import { template as _$template } from \"solid-js/web\";\nimport { delegateEvents as _$delegateEvents } from \"solid-js/web\";\nimport { className as _$className } from \"solid-js/web\";\nimport { effect as _$effect } from \"solid-js/web\";\nimport { createComponent as _$createComponent } from \"solid-js/web\";\nimport { insert as _$insert } from \"solid-js/web\";\nvar _tmpl$ = /*#__PURE__*/_$template(`<span>Reason must be between <!> and <!> characters long.`),\n  _tmpl$2 = /*#__PURE__*/_$template(`<div class=\"club-folder-selector my-modal\"><div class=content><div class=header><span>Report</span></div><form class=form><div class=o-form-group><label for=reason>Reason</label><textarea name=reason id=reason class=\"o-form-control active-border\"rows=5></textarea><div><div class=o-progress-bar></div><span>/<!> chars</span></div></div><div class=o-form-group><button type=submit>`);\nimport { PostApiReports as postReport } from \"@g/paths-public\";\nimport { customElement, noShadowDOM } from \"solid-element\";\nimport { Show, createSignal, onMount } from \"solid-js\";\nconst ReportModal = (props, {\n  element\n}) => {\n  noShadowDOM();\n  const rules = {\n    min: 50,\n    max: 500\n  };\n  const [visible, setVisible] = createSignal(false);\n  const [chars, setChars] = createSignal(0);\n  const [reason, setReason] = createSignal(\"\");\n  const [success, setSuccess] = createSignal(null);\n  onMount(() => {\n    if (props.openSelector) {\n      const element = document.querySelector(props.openSelector);\n      if (element) {\n        element.addEventListener(\"click\", show);\n      } else {\n        console.log(`Element is ${element} for selector ${props.openSelector}`);\n      }\n    }\n  });\n  const show = () => {\n    setVisible(true);\n  };\n  const validate = () => reason() && reason().length >= rules.min && reason().length <= rules.max;\n  const message = () => {\n    switch (success()) {\n      case true:\n        return {\n          msg: \"Report delivered!\",\n          cls: \"green\"\n        };\n      case false:\n        return {\n          msg: \"An error has occurred. Retry?\",\n          cls: \"red\"\n        };\n      default:\n        return {\n          msg: \"Send report\",\n          cls: null\n        };\n    }\n  };\n  const submit = async e => {\n    e.preventDefault();\n    const res = await postReport({\n      itemId: props.itemId,\n      reason: reason(),\n      itemType: props.itemType\n    }, {\n      RequestVerificationToken: props.csrf\n    });\n    setSuccess(res.ok);\n  };\n  const updateText = e => {\n    const value = e.currentTarget.value;\n    setReason(value);\n    setChars(value.length);\n  };\n\n  // Expose show method to element instance\n  Object.assign(element, {\n    show\n  });\n  return () => _$createComponent(Show, {\n    get when() {\n      return visible();\n    },\n    get children() {\n      var _el$ = _tmpl$2(),\n        _el$2 = _el$.firstChild,\n        _el$3 = _el$2.firstChild,\n        _el$4 = _el$3.nextSibling,\n        _el$5 = _el$4.firstChild,\n        _el$6 = _el$5.firstChild,\n        _el$7 = _el$6.nextSibling,\n        _el$8 = _el$7.nextSibling,\n        _el$9 = _el$8.firstChild,\n        _el$10 = _el$9.nextSibling,\n        _el$11 = _el$10.firstChild,\n        _el$13 = _el$11.nextSibling,\n        _el$12 = _el$13.nextSibling,\n        _el$20 = _el$5.nextSibling,\n        _el$21 = _el$20.firstChild;\n      _el$.$$click = () => setVisible(false);\n      _el$2.$$click = e => e.stopPropagation();\n      _el$4.addEventListener(\"submit\", submit);\n      _el$7.$$input = updateText;\n      _$insert(_el$10, chars, _el$11);\n      _$insert(_el$10, () => rules.max, _el$13);\n      _$insert(_el$5, _$createComponent(Show, {\n        get when() {\n          return !validate();\n        },\n        get children() {\n          var _el$14 = _tmpl$(),\n            _el$15 = _el$14.firstChild,\n            _el$18 = _el$15.nextSibling,\n            _el$16 = _el$18.nextSibling,\n            _el$19 = _el$16.nextSibling,\n            _el$17 = _el$19.nextSibling;\n          _$insert(_el$14, () => rules.min, _el$18);\n          _$insert(_el$14, () => rules.max, _el$19);\n          return _el$14;\n        }\n      }), null);\n      _$insert(_el$21, () => message().msg);\n      _$effect(_p$ => {\n        var _v$ = `counter ${validate() ? \"\" : \"invalid\"}`,\n          _v$2 = `${Math.min(100, 100 * (chars() / rules.max))}%`,\n          _v$3 = `btn ${message().cls}`;\n        _v$ !== _p$.e && _$className(_el$8, _p$.e = _v$);\n        _v$2 !== _p$.t && ((_p$.t = _v$2) != null ? _el$9.style.setProperty(\"width\", _v$2) : _el$9.style.removeProperty(\"width\"));\n        _v$3 !== _p$.a && _$className(_el$21, _p$.a = _v$3);\n        return _p$;\n      }, {\n        e: undefined,\n        t: undefined,\n        a: undefined\n      });\n      return _el$;\n    }\n  });\n};\ncustomElement(\"report-modal\", {\n  openSelector: undefined,\n  csrf: \"\",\n  itemId: 0,\n  itemType: \"\"\n}, ReportModal);\n_$delegateEvents([\"click\", \"input\"]);"
  ],
  "mappings": "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",
  "debugId": "EE33573E439D679964756E2164756E21",
  "names": []
}