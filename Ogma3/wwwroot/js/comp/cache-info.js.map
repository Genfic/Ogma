{
  "version": 3,
  "sources": ["..\\..\\..\\FrontendCode\\typescript\\src-solid\\cache-info.tsx"],
  "sourcesContent": [
    "import { template as _$template } from \"solid-js/web\";\nimport { delegateEvents as _$delegateEvents } from \"solid-js/web\";\nimport { createComponent as _$createComponent } from \"solid-js/web\";\nimport { insert as _$insert } from \"solid-js/web\";\nvar _tmpl$ = /*#__PURE__*/_$template(`<button type=button class=purge>Purge`),\n  _tmpl$2 = /*#__PURE__*/_$template(`<button type=button class=prime>Prime`),\n  _tmpl$3 = /*#__PURE__*/_$template(`<div class=cache><span class=count><strong></strong> elements in the cache`);\nimport { customElement } from \"solid-element\";\nimport { createResource, createSignal, Match, Switch } from \"solid-js\";\nimport { DeleteAdminApiCache, GetAdminApiCache } from \"@g/paths-internal\";\nimport css from \"./cache-info.css\";\nimport { styled } from \"@h/jsx-wc-style\";\nconst CacheInfo = props => {\n  const [primed, setPrimed] = createSignal(false);\n  const [cacheCount, {\n    refetch\n  }] = createResource(async () => {\n    const res = await GetAdminApiCache();\n    if (res.ok && typeof res.data === \"number\") {\n      return res.data;\n    }\n    console.warn(res.data);\n    return Number.NaN;\n  });\n  let timer;\n  const mouseLeft = () => {\n    timer = setTimeout(() => setPrimed(false), 500);\n  };\n  const mouseEntered = () => {\n    clearTimeout(timer);\n  };\n  const purge = async () => {\n    if (confirm(\"Are you sure?\")) {\n      const res = await DeleteAdminApiCache({\n        RequestVerificationToken: props.csrf\n      });\n      if (res.ok) {\n        await refetch();\n      } else {\n        console.error(\"Failed to purge cache:\", res);\n      }\n    } else {\n      setPrimed(false);\n    }\n  };\n\n  // The JSX template\n  return (() => {\n    var _el$ = _tmpl$3(),\n      _el$2 = _el$.firstChild,\n      _el$3 = _el$2.firstChild;\n    _$insert(_el$3, cacheCount);\n    _$insert(_el$, _$createComponent(Switch, {\n      get children() {\n        return [_$createComponent(Match, {\n          get when() {\n            return primed();\n          },\n          get children() {\n            var _el$4 = _tmpl$();\n            _el$4.addEventListener(\"mouseenter\", mouseEntered);\n            _el$4.addEventListener(\"mouseleave\", mouseLeft);\n            _el$4.$$click = purge;\n            return _el$4;\n          }\n        }), _$createComponent(Match, {\n          get when() {\n            return !primed();\n          },\n          get children() {\n            var _el$5 = _tmpl$2();\n            _el$5.$$click = setPrimed;\n            _el$5.$$clickData = true;\n            return _el$5;\n          }\n        })];\n      }\n    }), null);\n    return _el$;\n  })();\n};\ncustomElement(\"cache-info\", {\n  csrf: \"\"\n}, styled(css)(CacheInfo));\n_$delegateEvents([\"click\"]);"
  ],
  "mappings": "+qBAIA,FAAI,JAAsB,JAAW,uCAAuC,EAC1E,EAAuB,EAAW,uCAAuC,EACzE,EAAuB,EAAW,4EAA4E,EAM1G,EAAY,KAAS,CACzB,IAAO,EAAQ,GAAa,EAAa,EAAK,GACvC,GACL,YACG,EAAe,SAAY,CAC9B,IAAM,EAAM,MAAM,EAAiB,EACnC,GAAI,EAAI,IAAM,OAAO,EAAI,OAAS,SAChC,OAAO,EAAI,KAGb,OADA,QAAQ,KAAK,EAAI,IAAI,EACd,OAAO,IACf,EACG,EACE,EAAY,IAAM,CACtB,EAAQ,WAAW,IAAM,EAAU,EAAK,EAAG,GAAG,GAE1C,EAAe,IAAM,CACzB,aAAa,CAAK,GAEd,EAAQ,SAAY,CACxB,GAAI,QAAQ,eAAe,EAAG,CAC5B,IAAM,EAAM,MAAM,EAAoB,CACpC,yBAA0B,EAAM,IAClC,CAAC,EACD,GAAI,EAAI,GACN,MAAM,EAAQ,EAEd,aAAQ,MAAM,yBAA0B,CAAG,EAG7C,OAAU,EAAK,GAKnB,OAAQ,IAAM,CACZ,IAAI,EAAO,EAAQ,EACjB,EAAQ,EAAK,WACb,EAAQ,EAAM,WA4BhB,OA3BA,EAAS,EAAO,CAAU,EAC1B,EAAS,EAAM,EAAkB,EAAQ,IACnC,SAAQ,EAAG,CACb,MAAO,CAAC,EAAkB,EAAO,IAC3B,KAAI,EAAG,CACT,OAAO,EAAO,MAEZ,SAAQ,EAAG,CACb,IAAI,EAAQ,EAAO,EAInB,OAHA,EAAM,iBAAiB,aAAc,CAAY,EACjD,EAAM,iBAAiB,aAAc,CAAS,EAC9C,EAAM,QAAU,EACT,EAEX,CAAC,EAAG,EAAkB,EAAO,IACvB,KAAI,EAAG,CACT,OAAQ,EAAO,MAEb,SAAQ,EAAG,CACb,IAAI,EAAQ,EAAQ,EAGpB,OAFA,EAAM,QAAU,EAChB,EAAM,YAAc,GACb,EAEX,CAAC,CAAC,EAEN,CAAC,EAAG,IAAI,EACD,IACN,GAEL,EAAc,aAAc,CAC1B,KAAM,EACR,EAAG,EAAO,CAAG,EAAE,CAAS,CAAC,EACzB,EAAiB,CAAC,OAAO,CAAC",
  "debugId": "36E5AA10F3C01DF964756E2164756E21",
  "names": []
}