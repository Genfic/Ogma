{
  "version": 3,
  "sources": ["..\\..\\..\\FrontendCode\\typescript\\src-solid\\club-folder-selector.tsx"],
  "sourcesContent": [
    "import { template as _$template } from \"solid-js/web\";\nimport { delegateEvents as _$delegateEvents } from \"solid-js/web\";\nimport { memo as _$memo } from \"solid-js/web\";\nimport { createComponent as _$createComponent } from \"solid-js/web\";\nimport { className as _$className } from \"solid-js/web\";\nimport { setAttribute as _$setAttribute } from \"solid-js/web\";\nimport { effect as _$effect } from \"solid-js/web\";\nimport { insert as _$insert } from \"solid-js/web\";\nvar _tmpl$ = /*#__PURE__*/_$template(`<div class=header><img width=32 height=32><span>`),\n  _tmpl$2 = /*#__PURE__*/_$template(`<div>`),\n  _tmpl$3 = /*#__PURE__*/_$template(`<div class=folders>`),\n  _tmpl$4 = /*#__PURE__*/_$template(`<div class=buttons><button type=button class=\"active-border add\">Add</button><button type=button class=\"active-border cancel\">Go back`),\n  _tmpl$5 = /*#__PURE__*/_$template(`<div>Loading folders...`),\n  _tmpl$6 = /*#__PURE__*/_$template(`<div>Error: `),\n  _tmpl$7 = /*#__PURE__*/_$template(`<button type=button>`),\n  _tmpl$8 = /*#__PURE__*/_$template(`<div class=header><span>Your clubs`),\n  _tmpl$9 = /*#__PURE__*/_$template(`<div class=clubs>`),\n  _tmpl$10 = /*#__PURE__*/_$template(`<button type=button class=club><img width=48 height=48><span>`),\n  _tmpl$11 = /*#__PURE__*/_$template(`<button type=button class=club-wc-button>Add to folder`),\n  _tmpl$12 = /*#__PURE__*/_$template(`<div class=\"club-folder-selector my-modal\"><div class=content>`);\nimport { PostApiFoldersAddStory as addStoryToFolder, GetApiFolders as getFolders, GetApiClubsUser as getUserClubs } from \"@g/paths-public\";\nimport { log } from \"@h/logger\";\nimport { customElement, noShadowDOM } from \"solid-element\";\nimport { For, Show, createResource, createSignal, onMount } from \"solid-js\";\nconst ClubFolderSelector = (props, {\n  element\n}) => {\n  noShadowDOM();\n  const [clubs, setClubs] = createSignal([]);\n  const [selectedClub, setSelectedClub] = createSignal(null);\n  const [status, setStatus] = createSignal({\n    message: \"\",\n    success: false\n  });\n  const [visible, setVisible] = createSignal(false);\n  const [selectedFolder, setSelectedFolder] = createSignal(null);\n  onMount(async () => {\n    element.classList.add(\"wc-loaded\");\n    const response = await getUserClubs();\n    if (response.ok) {\n      setClubs(response.data);\n    } else {\n      log.error(`Error fetching data: ${response.statusText}`);\n    }\n  });\n\n  // Use resource for folders\n  const [folders] = createResource(selectedClub, async club => {\n    if (!club) {\n      throw new Error(\"Club not selected\");\n    }\n    const res = await getFolders(club.id);\n    if (!res.ok) {\n      throw new Error(res.statusText);\n    }\n    return res.data;\n  });\n  const setClub = club => {\n    setSelectedClub(club);\n    setSelectedFolder(null);\n  };\n  const setVisibility = visibility => {\n    setVisible(visibility);\n  };\n  const select = folder => {\n    log.info(`Selecting folder with ID ${folder.id}`);\n    setSelectedFolder(folder);\n  };\n  const add = async () => {\n    if (selectedFolder() === null) {\n      setStatus({\n        message: \"You must select a folder!\",\n        success: false\n      });\n      return;\n    }\n    const response = await addStoryToFolder({\n      folderId: selectedFolder().id,\n      storyId: props.storyId\n    }, {\n      RequestVerificationToken: props.csrf\n    });\n    if (response.ok) {\n      setStatus({\n        message: \"Successfully added\",\n        success: true\n      });\n    } else if (typeof response.data === \"string\") {\n      setStatus({\n        message: response.data.replaceAll('\"', \"\"),\n        success: false\n      });\n    }\n  };\n  const selectedClubView = () => [(() => {\n    var _el$ = _tmpl$(),\n      _el$2 = _el$.firstChild,\n      _el$3 = _el$2.nextSibling;\n    _$insert(_el$3, () => selectedClub().name);\n    _$effect(_p$ => {\n      var _v$ = selectedClub().icon ?? \"ph-250.png\",\n        _v$2 = selectedClub().name;\n      _v$ !== _p$.e && _$setAttribute(_el$2, \"src\", _p$.e = _v$);\n      _v$2 !== _p$.t && _$setAttribute(_el$2, \"alt\", _p$.t = _v$2);\n      return _p$;\n    }, {\n      e: undefined,\n      t: undefined\n    });\n    return _el$;\n  })(), (() => {\n    var _el$4 = _tmpl$2();\n    _$insert(_el$4, () => status().message);\n    _$effect(() => _$className(_el$4, `msg ${status().success ? \"success\" : \"error\"}`));\n    return _el$4;\n  })(), (() => {\n    var _el$5 = _tmpl$3();\n    _$insert(_el$5, _$createComponent(Show, {\n      get when() {\n        return !folders.loading;\n      },\n      get fallback() {\n        return _tmpl$5();\n      },\n      get children() {\n        return _$createComponent(Show, {\n          get when() {\n            return !folders.error;\n          },\n          get fallback() {\n            return (() => {\n              var _el$10 = _tmpl$6(),\n                _el$11 = _el$10.firstChild;\n              _$insert(_el$10, () => folders.error?.message, null);\n              return _el$10;\n            })();\n          },\n          get children() {\n            return _$createComponent(For, {\n              get each() {\n                return folders();\n              },\n              children: folder => (() => {\n                var _el$12 = _tmpl$7();\n                _el$12.$$click = () => select(folder);\n                _$insert(_el$12, () => folder.name);\n                _$effect(() => _$className(_el$12, `folder ${!folder.canAdd ? \"locked\" : \"\"} ${selectedFolder()?.id === folder.id ? \"active\" : \"\"}`));\n                return _el$12;\n              })()\n            });\n          }\n        });\n      }\n    }));\n    return _el$5;\n  })(), (() => {\n    var _el$6 = _tmpl$4(),\n      _el$7 = _el$6.firstChild,\n      _el$8 = _el$7.nextSibling;\n    _el$7.$$click = add;\n    _el$8.$$click = () => setClub(null);\n    return _el$6;\n  })()];\n  const allClubsView = () => [_tmpl$8(), (() => {\n    var _el$14 = _tmpl$9();\n    _$insert(_el$14, _$createComponent(For, {\n      get each() {\n        return clubs();\n      },\n      children: c => (() => {\n        var _el$15 = _tmpl$10(),\n          _el$16 = _el$15.firstChild,\n          _el$17 = _el$16.nextSibling;\n        _el$15.$$click = () => setClub(c);\n        _$insert(_el$17, () => c.name);\n        _$effect(_p$ => {\n          var _v$3 = c.icon ?? \"ph-250.png\",\n            _v$4 = c.name;\n          _v$3 !== _p$.e && _$setAttribute(_el$16, \"src\", _p$.e = _v$3);\n          _v$4 !== _p$.t && _$setAttribute(_el$16, \"alt\", _p$.t = _v$4);\n          return _p$;\n        }, {\n          e: undefined,\n          t: undefined\n        });\n        return _el$15;\n      })()\n    }));\n    return _el$14;\n  })()];\n  return [(() => {\n    var _el$18 = _tmpl$11();\n    _el$18.$$click = () => setVisibility(true);\n    return _el$18;\n  })(), _$createComponent(Show, {\n    get when() {\n      return visible();\n    },\n    get children() {\n      var _el$19 = _tmpl$12(),\n        _el$20 = _el$19.firstChild;\n      _el$19.$$click = () => setVisibility(false);\n      _el$20.$$click = e => e.stopPropagation();\n      _$insert(_el$20, (() => {\n        var _c$ = _$memo(() => selectedClub() !== null);\n        return () => _c$() ? selectedClubView() : allClubsView();\n      })());\n      return _el$19;\n    }\n  })];\n};\ncustomElement(\"o-club-folder-selector\", {\n  storyId: 0,\n  csrf: \"\"\n}, ClubFolderSelector);\n_$delegateEvents([\"click\"]);"
  ],
  "mappings": "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",
  "debugId": "C5E0678BE83EC19B64756E2164756E21",
  "names": []
}