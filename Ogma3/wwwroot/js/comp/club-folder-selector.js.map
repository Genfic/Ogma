{
  "version": 3,
  "sources": ["..\\..\\..\\FrontendCode\\typescript\\src-solid\\club-folder-selector.tsx"],
  "sourcesContent": [
    "import { template as _$template } from \"solid-js/web\";\nimport { delegateEvents as _$delegateEvents } from \"solid-js/web\";\nimport { setAttribute as _$setAttribute } from \"solid-js/web\";\nimport { createComponent as _$createComponent } from \"solid-js/web\";\nimport { className as _$className } from \"solid-js/web\";\nimport { effect as _$effect } from \"solid-js/web\";\nimport { insert as _$insert } from \"solid-js/web\";\nvar _tmpl$ = /*#__PURE__*/_$template(`<div>`),\n  _tmpl$2 = /*#__PURE__*/_$template(`<div>Loading folders...`),\n  _tmpl$3 = /*#__PURE__*/_$template(`<div>Error fetching folders`),\n  _tmpl$4 = /*#__PURE__*/_$template(`<div class=folders>`),\n  _tmpl$5 = /*#__PURE__*/_$template(`<div class=buttons><button type=button class=\"active-border add\">Add</button><button type=button class=\"active-border cancel\">Go back`),\n  _tmpl$6 = /*#__PURE__*/_$template(`<div>This club has no folders`),\n  _tmpl$7 = /*#__PURE__*/_$template(`<button type=button class=folder>`),\n  _tmpl$8 = /*#__PURE__*/_$template(`<div class=clubs>`),\n  _tmpl$9 = /*#__PURE__*/_$template(`<div>You're not a member of any clubs`),\n  _tmpl$10 = /*#__PURE__*/_$template(`<button type=button class=club><img width=48 height=48><span>`),\n  _tmpl$11 = /*#__PURE__*/_$template(`<span>Your clubs`),\n  _tmpl$12 = /*#__PURE__*/_$template(`<img width=32 height=32>`),\n  _tmpl$13 = /*#__PURE__*/_$template(`<span>`),\n  _tmpl$14 = /*#__PURE__*/_$template(`<button type=button class=club-wc-button>Add to folder`),\n  _tmpl$15 = /*#__PURE__*/_$template(`<div class=content>`);\nimport { PostApiFoldersAddStory as addStoryToFolder, GetApiFolders as getFolders, GetApiClubsUser as getUserClubs } from \"@g/paths-public\";\nimport { customElement, noShadowDOM } from \"solid-element\";\nimport { For, createResource, createSignal, Switch, Match } from \"solid-js\";\nimport { Dialog } from \"./common/_dialog\";\nconst ClubFolderSelector = props => {\n  noShadowDOM();\n  const [isOpen, setIsOpen] = createSignal(false);\n  const [selectedClub, setSelectedClub] = createSignal(null);\n  const [status, setStatus] = createSignal({\n    message: \"\",\n    success: false\n  });\n  const [selectedFolder, setSelectedFolder] = createSignal(null);\n  const [dialogRef, setDialogRef] = createSignal();\n  const [clubs] = createResource(isOpen, async condition => {\n    if (!condition) return null;\n    const res = await getUserClubs();\n    return res.ok ? res.data : null;\n  });\n  const [folders] = createResource(selectedClub, async club => {\n    if (!club) {\n      throw new Error(\"Club not selected\");\n    }\n    const res = await getFolders(club.id);\n    if (!res.ok) {\n      throw new Error(res.statusText);\n    }\n    return res.data;\n  });\n  const reset = () => {\n    setSelectedClub(null);\n    setSelectedFolder(null);\n    setStatus({\n      message: \"\",\n      success: false\n    });\n  };\n  const open = () => {\n    setIsOpen(true);\n    dialogRef().open();\n  };\n  const setClub = club => {\n    setSelectedClub(club);\n    setSelectedFolder(null);\n  };\n  const add = async () => {\n    if (selectedFolder() === null) {\n      setStatus({\n        message: \"You must select a folder!\",\n        success: false\n      });\n      return;\n    }\n    const response = await addStoryToFolder({\n      folderId: selectedFolder().id,\n      storyId: props.storyId\n    }, {\n      RequestVerificationToken: props.csrf\n    });\n    if (response.ok) {\n      setStatus({\n        message: \"Successfully added\",\n        success: true\n      });\n    } else if (typeof response.data === \"string\") {\n      setStatus({\n        message: response.data,\n        success: false\n      });\n    }\n  };\n  const selectedClubView = () => [(() => {\n    var _el$ = _tmpl$();\n    _$insert(_el$, () => status().message);\n    _$effect(() => _$className(_el$, `msg ${status().success ? \"success\" : \"error\"}`));\n    return _el$;\n  })(), (() => {\n    var _el$2 = _tmpl$4();\n    _$insert(_el$2, _$createComponent(Switch, {\n      get children() {\n        return [_$createComponent(Match, {\n          get when() {\n            return folders.loading;\n          },\n          get children() {\n            return _tmpl$2();\n          }\n        }), _$createComponent(Match, {\n          get when() {\n            return folders.error;\n          },\n          get children() {\n            return _tmpl$3();\n          }\n        }), _$createComponent(Match, {\n          when: folders,\n          get children() {\n            return _$createComponent(For, {\n              get each() {\n                return folders();\n              },\n              get fallback() {\n                return _tmpl$6();\n              },\n              children: folder => (() => {\n                var _el$9 = _tmpl$7();\n                _el$9.$$click = setSelectedFolder;\n                _el$9.$$clickData = folder;\n                _$insert(_el$9, () => folder.name);\n                _$effect(_p$ => {\n                  var _v$ = !folder.canAdd,\n                    _v$2 = !!(selectedFolder()?.id === folder.id);\n                  _v$ !== _p$.e && _el$9.classList.toggle(\"locked\", _p$.e = _v$);\n                  _v$2 !== _p$.t && _el$9.classList.toggle(\"active\", _p$.t = _v$2);\n                  return _p$;\n                }, {\n                  e: undefined,\n                  t: undefined\n                });\n                return _el$9;\n              })()\n            });\n          }\n        })];\n      }\n    }));\n    return _el$2;\n  })(), (() => {\n    var _el$5 = _tmpl$5(),\n      _el$6 = _el$5.firstChild,\n      _el$7 = _el$6.nextSibling;\n    _el$6.$$click = add;\n    _el$7.$$click = setClub;\n    _el$7.$$clickData = null;\n    return _el$5;\n  })()];\n  const allClubsView = () => (() => {\n    var _el$10 = _tmpl$8();\n    _$insert(_el$10, _$createComponent(For, {\n      get each() {\n        return clubs();\n      },\n      get fallback() {\n        return _tmpl$9();\n      },\n      children: club => (() => {\n        var _el$12 = _tmpl$10(),\n          _el$13 = _el$12.firstChild,\n          _el$14 = _el$13.nextSibling;\n        _el$12.$$click = setClub;\n        _el$12.$$clickData = club;\n        _$insert(_el$14, () => club.name);\n        _$effect(_p$ => {\n          var _v$3 = club.icon ?? \"ph-250.png\",\n            _v$4 = club.name;\n          _v$3 !== _p$.e && _$setAttribute(_el$13, \"src\", _p$.e = _v$3);\n          _v$4 !== _p$.t && _$setAttribute(_el$13, \"alt\", _p$.t = _v$4);\n          return _p$;\n        }, {\n          e: undefined,\n          t: undefined\n        });\n        return _el$12;\n      })()\n    }));\n    return _el$10;\n  })();\n  const selectedView = () => {\n    const club = selectedClub();\n    if (!club) {\n      return {\n        view: allClubsView,\n        head: _tmpl$11()\n      };\n    }\n    return {\n      view: selectedClubView,\n      head: [(() => {\n        var _el$16 = _tmpl$12();\n        _$effect(_p$ => {\n          var _v$5 = club.icon ?? \"ph-250.png\",\n            _v$6 = club.name;\n          _v$5 !== _p$.e && _$setAttribute(_el$16, \"src\", _p$.e = _v$5);\n          _v$6 !== _p$.t && _$setAttribute(_el$16, \"alt\", _p$.t = _v$6);\n          return _p$;\n        }, {\n          e: undefined,\n          t: undefined\n        });\n        return _el$16;\n      })(), (() => {\n        var _el$17 = _tmpl$13();\n        _$insert(_el$17, () => club.name);\n        return _el$17;\n      })()]\n    };\n  };\n  return [(() => {\n    var _el$18 = _tmpl$14();\n    _el$18.$$click = open;\n    return _el$18;\n  })(), _$createComponent(Dialog, {\n    ref: setDialogRef,\n    onClose: reset,\n    get header() {\n      return selectedView().head;\n    },\n    classes: [\"club-folder-selector\"],\n    get children() {\n      var _el$19 = _tmpl$15();\n      _$insert(_el$19, () => selectedView().view());\n      return _el$19;\n    }\n  })];\n};\ncustomElement(\"o-club-folder-selector\", {\n  storyId: 0,\n  csrf: \"\"\n}, ClubFolderSelector);\n_$delegateEvents([\"click\"]);"
  ],
  "mappings": "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",
  "debugId": "FF9492806DF6BC8564756E2164756E21",
  "names": []
}