@page
@model ExternalLoginsModel
@{
	ViewData["Title"] = "Manage your external logins";
	ViewData["ActivePage"] = ManageNavPages.ExternalLogins;
	Request.Cookies.TryGetValue("theme", out var theme);
	theme ??= "light";
	var logoColor = theme == "light" ? "black" : "white";
}

<partial name="_StatusMessage" for="StatusMessage" />

<div class="logins">
	@foreach (var login in Model.AllLogins)
	{
		<img alt="" src="https://api.iconify.design/simple-icons:@(login.Name.ToLower()).svg?color=@logoColor" />

		<div class="name">
			@login.DisplayName
		</div>

		if (login.Active)
		{
			<span>Linked</span>

			<form asp-page-handler="RemoveLogin" method="post">
				<input asp-for="@login.Name" name="LoginProvider" type="hidden" />
				<input asp-for="@login.Key" name="ProviderKey" type="hidden" />
				<button type="submit" class="btn btn-primary" title="Remove this @login.DisplayName login from your account">
					Unlink
				</button>
			</form>
		}
		else
		{
			<span></span>

			<form asp-page-handler="LinkLogin" method="post" >
				<input asp-for="@login.Name" name="Provider" type="hidden" />
				<button type="submit" class="btn btn-primary" title="Log in using your @login.DisplayName account">
					Link
				</button>
			</form>
		}

	}
</div>